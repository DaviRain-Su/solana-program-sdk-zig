# Story: v3.0.4 Anchor IDL + Zig Client

> Add Anchor-compatible IDL JSON generation and Zig client codegen.

## Goals

- Generate Anchor IDL JSON from comptime program definitions
- Provide Zig client codegen from the same IDL model
- Keep API minimal and compile-time friendly

## Acceptance Criteria

### anchor IDL

- [x] `anchor.idl.generateJson` returns Anchor-compatible JSON
- [x] `anchor.idl` extracts instruction accounts, args, and discriminators
- [x] `anchor.idl` emits type definitions for structs used in args/accounts
- [x] `anchor.idl` supports errors enum mapping (code/name/msg)

### Zig client codegen

- [x] `anchor.codegen.generateZigClient` outputs Zig module source
- [x] Generated client builds instructions with discriminator + Borsh args
- [x] Generated client uses `solana_sdk.Instruction.newWithBytes`

### Docs & Sync

- [x] Update `docs/ANCHOR_COMPATIBILITY.md`
- [x] Update README with new IDL/client features
- [x] Update ROADMAP v3.0.4 entry
- [x] Update CHANGELOG session entry
- [x] Add IDL/Codegen tests

## Completion Status

- Start date: 2026-01-12
- Completion date: 2026-01-12
- Status: âœ… Completed
