# Story: v3.0.1 Anchor Extraction (Monorepo)

> 将 sol-anchor-zig 从主 SDK 中拆分为仓库内独立子包（anchor/），并通过路径依赖使用 solana_program_sdk。

## Goals

- 在同一仓库内创建 `anchor/` 子包并独立构建
- 迁移 `src/anchor/*` 到 `anchor/src/*`
- 移除主 SDK 中的 anchor 导出与旧路径
- 保持 anchor API 行为不变
- 添加独立 CI 与测试流程

## Acceptance Criteria

### anchor/ 子包结构

- [x] `anchor/build.zig` 构建子包模块
- [x] `anchor/build.zig.zon` 使用 `.path = "../"` 依赖 `solana_program_sdk`
- [x] `anchor/src/root.zig` 作为新入口，导出所有 anchor API
- [x] `anchor/src/*.zig` 完整迁移自 `src/anchor/*`

### 主 SDK 清理

- [x] 删除 `src/anchor/`
- [x] `src/root.zig` 移除 `pub const anchor = @import("anchor/root.zig");`
- [x] 所有锚点引用更新为新路径（如文档/示例）

### 文档同步

- [x] `README.md` 说明 anchor 子包位置与使用方式
- [x] `ROADMAP.md` 标记 v3.0.1 拆分状态
- [x] `CHANGELOG.md` 记录拆分与结构调整
- [x] `anchor/README.md` 描述子包用途与依赖
- [x] `anchor/ROADMAP.md` 与 `anchor/CHANGELOG.md` 初始化
- [x] `stories/v3.0.0-anchor-phase*.md` 迁移至 `anchor/stories/`

### CI & Tests

- [x] 新增 `.github/workflows/anchor-ci.yml`
- [x] `cd anchor && ../solana-zig/zig build test --summary all` 通过
- [ ] 主仓库测试不因拆分破坏

## Completion Status

- Start date: 2026-01-12
- Completion date: TBD
- Status: ⏳ In Progress
