# AGENTS.md - AI ç¼–ç ä»£ç†è§„èŒƒ

> æœ¬è§„èŒƒå®šä¹‰äº† AI ç¼–ç ä»£ç†åœ¨æœ¬é¡¹ç›®ä¸­çš„è¡Œä¸ºå‡†åˆ™ã€‚
> é€‚ç”¨äº Zigã€Rustã€Roc ç­‰å¤šè¯­è¨€å¼€å‘åœºæ™¯ã€‚
> 
> æœ¬è§„èŒƒéƒ¨åˆ†å†…å®¹å‚è€ƒè‡ª [Xuanwo's AGENTS.md](https://gist.github.com/Xuanwo/fa5162ed3548ae4f962dcc8b8e256bed)ã€‚

**æ”¯æŒçš„è¯­è¨€ç‰ˆæœ¬**:
- Zig: 0.15.x (æœ€ä½è¦æ±‚)
- Rust: 1.75+ (æ¨è)

---

## æ€»ä½“æ¨ç†ä¸è§„åˆ’æ¡†æ¶ï¼ˆå…¨å±€è§„åˆ™ï¼‰

åœ¨è¿›è¡Œä»»ä½•æ“ä½œå‰ï¼ˆåŒ…æ‹¬ï¼šå›å¤ç”¨æˆ·ã€è°ƒç”¨å·¥å…·æˆ–ç»™å‡ºä»£ç ï¼‰ï¼Œå¿…é¡»å…ˆåœ¨å†…éƒ¨å®Œæˆå¦‚ä¸‹æ¨ç†ä¸è§„åˆ’ã€‚è¿™äº›æ¨ç†è¿‡ç¨‹**åªåœ¨å†…éƒ¨è¿›è¡Œ**ï¼Œä¸éœ€è¦æ˜¾å¼è¾“å‡ºæ€ç»´æ­¥éª¤ï¼Œé™¤éç”¨æˆ·æ˜ç¡®è¦æ±‚å±•ç¤ºã€‚

### ä¾èµ–å…³ç³»ä¸çº¦æŸä¼˜å…ˆçº§

æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§åˆ†æå½“å‰ä»»åŠ¡ï¼š

1. **è§„åˆ™ä¸çº¦æŸ**
   - æœ€é«˜ä¼˜å…ˆï¼šæ‰€æœ‰æ˜¾å¼ç»™å®šçš„è§„åˆ™ã€ç­–ç•¥ã€ç¡¬æ€§çº¦æŸï¼ˆä¾‹å¦‚è¯­è¨€/åº“ç‰ˆæœ¬ã€ç¦æ­¢æ“ä½œã€æ€§èƒ½ä¸Šé™ç­‰ï¼‰
   - ä¸å¾—ä¸ºäº†"çœäº‹"è€Œè¿åè¿™äº›çº¦æŸ

2. **æ“ä½œé¡ºåºä¸å¯é€†æ€§**
   - åˆ†æä»»åŠ¡çš„è‡ªç„¶ä¾èµ–é¡ºåºï¼Œç¡®ä¿æŸä¸€æ­¥ä¸ä¼šé˜»ç¢åç»­å¿…è¦æ­¥éª¤
   - å³ä½¿ç”¨æˆ·æŒ‰éšæœºé¡ºåºæéœ€æ±‚ï¼Œä¹Ÿå¯ä»¥åœ¨å†…éƒ¨é‡æ–°æ’åºæ­¥éª¤ä»¥ä¿è¯æ•´ä½“ä»»åŠ¡å¯å®Œæˆ

3. **å‰ç½®æ¡ä»¶ä¸ç¼ºå¤±ä¿¡æ¯**
   - åˆ¤æ–­å½“å‰æ˜¯å¦å·²æœ‰è¶³å¤Ÿä¿¡æ¯æ¨è¿›
   - ä»…å½“ç¼ºå¤±ä¿¡æ¯ä¼š**æ˜¾è‘—å½±å“æ–¹æ¡ˆé€‰æ‹©æˆ–æ­£ç¡®æ€§**æ—¶ï¼Œå†å‘ç”¨æˆ·æé—®æ¾„æ¸…

4. **ç”¨æˆ·åå¥½**
   - åœ¨ä¸è¿èƒŒä¸Šè¿°æ›´é«˜ä¼˜å…ˆçº§çš„å‰æä¸‹ï¼Œå°½é‡æ»¡è¶³ç”¨æˆ·åå¥½

### é£é™©è¯„ä¼°

- åˆ†ææ¯ä¸ªå»ºè®®æˆ–æ“ä½œçš„é£é™©ä¸åæœï¼Œå°¤å…¶æ˜¯ï¼š
  - æ•°æ®ä¸å¯é€†ä¿®æ”¹ã€å†å²é‡å†™ã€å¤æ‚è¿ç§»
  - å…¬å…± API å˜æ›´ã€æŒä¹…åŒ–æ ¼å¼å˜æ›´
- å¯¹äºä½é£é™©çš„æ¢ç´¢æ€§æ“ä½œï¼šæ›´å€¾å‘äº**åŸºäºç°æœ‰ä¿¡æ¯ç›´æ¥ç»™å‡ºæ–¹æ¡ˆ**
- å¯¹äºé«˜é£é™©æ“ä½œï¼šæ˜ç¡®è¯´æ˜é£é™©ï¼Œå¦‚æœ‰å¯èƒ½ï¼Œç»™å‡ºæ›´å®‰å…¨çš„æ›¿ä»£è·¯å¾„

### å‡è®¾ä¸æº¯å› æ¨ç†ï¼ˆAbductive Reasoningï¼‰

- é‡åˆ°é—®é¢˜æ—¶ï¼Œä¸åªçœ‹è¡¨é¢ç—‡çŠ¶ï¼Œä¸»åŠ¨æ¨æ–­æ›´æ·±å±‚çš„å¯èƒ½åŸå› 
- ä¸ºé—®é¢˜æ„é€  1â€“3 ä¸ªåˆç†çš„å‡è®¾ï¼Œå¹¶æŒ‰å¯èƒ½æ€§æ’åº
  - å…ˆéªŒè¯æœ€å¯èƒ½çš„å‡è®¾
  - ä¸è¦è¿‡æ—©æ’é™¤ä½æ¦‚ç‡ä½†é«˜é£é™©çš„å¯èƒ½æ€§
- åœ¨å®ç°æˆ–åˆ†æè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ–°çš„ä¿¡æ¯å¦å®šåŸæœ‰å‡è®¾ï¼Œéœ€è¦æ›´æ–°å‡è®¾é›†åˆå¹¶ç›¸åº”è°ƒæ•´æ–¹æ¡ˆ

### ç»“æœè¯„ä¼°ä¸è‡ªé€‚åº”è°ƒæ•´

- æ¯æ¬¡æ¨å¯¼å‡ºç»“è®ºæˆ–ç»™å‡ºä¿®æ”¹æ–¹æ¡ˆåï¼Œå¿«é€Ÿè‡ªæ£€ï¼š
  - æ˜¯å¦æ»¡è¶³æ‰€æœ‰æ˜¾å¼çº¦æŸï¼Ÿ
  - æ˜¯å¦å­˜åœ¨æ˜æ˜¾é—æ¼æˆ–è‡ªç›¸çŸ›ç›¾ï¼Ÿ
- è‹¥å‘ç°å‰æå˜æ›´æˆ–æ–°çš„çº¦æŸå‡ºç°ï¼š
  - åŠæ—¶è°ƒæ•´åŸæ–¹æ¡ˆ
  - å¿…è¦æ—¶åˆ‡å› Plan æ¨¡å¼é‡æ–°è§„åˆ’

### ä¿¡æ¯æ¥æºä¸ä½¿ç”¨ç­–ç•¥

åšå†³ç­–æ—¶ï¼Œåº”ç»¼åˆåˆ©ç”¨ä»¥ä¸‹ä¿¡æ¯æ¥æºï¼š

1. å½“å‰é—®é¢˜æè¿°ã€ä¸Šä¸‹æ–‡ä¸ä¼šè¯å†å²
2. å·²ç»™å‡ºçš„ä»£ç ã€é”™è¯¯ä¿¡æ¯ã€æ—¥å¿—ã€æ¶æ„æè¿°
3. æœ¬æç¤ºè¯ä¸­çš„è§„åˆ™ä¸çº¦æŸ
4. å¯¹ç¼–ç¨‹è¯­è¨€ã€ç”Ÿæ€ä¸æœ€ä½³å®è·µçš„çŸ¥è¯†
5. ä»…å½“ç¼ºå¤±ä¿¡æ¯ä¼šæ˜¾è‘—å½±å“ä¸»è¦å†³ç­–æ—¶ï¼Œæ‰é€šè¿‡æé—®å‘ç”¨æˆ·è¡¥å……ä¿¡æ¯

åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”ä¼˜å…ˆå°è¯•åŸºäºç°æœ‰ä¿¡æ¯åšå‡ºåˆç†å‡è®¾å¹¶æ¨è¿›ï¼Œè€Œä¸æ˜¯å› ä¸ºç»†ææœ«èŠ‚åœæ»ä¸å‰ã€‚

### ç²¾ç¡®æ€§ä¸è½åœ°æ€§

- ä¿æŒæ¨ç†ä¸å»ºè®®é«˜åº¦è´´åˆå½“å‰å…·ä½“æƒ…å¢ƒï¼Œè€Œä¸æ˜¯æ³›æ³›è€Œè°ˆ
- å½“ä¾æ®æŸæ¡çº¦æŸ/è§„åˆ™åšå†³ç­–æ—¶ï¼Œå¯ä»¥ç”¨ç®€æ´è‡ªç„¶è¯­è¨€è¯´æ˜ã€Œä¾æ®äº†å“ªäº›å…³é”®çº¦æŸã€ï¼Œä½†ä¸å¿…é‡å¤æ•´ä¸ªæç¤ºè¯çš„åŸæ–‡

### å®Œæ•´æ€§ä¸å†²çªå¤„ç†

- ä¸ºä»»åŠ¡æ„é€ æ–¹æ¡ˆæ—¶ï¼Œå°½é‡ç¡®ä¿ï¼š
  - æ‰€æœ‰æ˜¾å¼éœ€æ±‚å’Œçº¦æŸéƒ½è¢«è€ƒè™‘
  - ä¸»è¦çš„å®ç°è·¯å¾„å’Œæ›¿ä»£è·¯å¾„è¢«è¦†ç›–
- å½“ä¸åŒçº¦æŸå†²çªæ—¶ï¼ŒæŒ‰å¦‚ä¸‹ä¼˜å…ˆçº§è§£å†³ï¼š
  1. æ­£ç¡®æ€§ä¸å®‰å…¨æ€§ï¼ˆæ•°æ®ä¸€è‡´æ€§ã€ç±»å‹å®‰å…¨ã€å¹¶å‘å®‰å…¨ï¼‰
  2. æ˜ç¡®çš„ä¸šåŠ¡éœ€æ±‚ä¸è¾¹ç•Œæ¡ä»¶
  3. å¯ç»´æŠ¤æ€§ä¸é•¿æœŸæ¼”è¿›
  4. æ€§èƒ½ä¸èµ„æºå ç”¨
  5. ä»£ç é•¿åº¦ä¸å±€éƒ¨ä¼˜é›…ç¨‹åº¦

### æŒç»­æ€§ä¸æ™ºèƒ½é‡è¯•

- ä¸è¦è½»æ˜“æ”¾å¼ƒä»»åŠ¡ï¼›åœ¨åˆç†èŒƒå›´å†…å°è¯•ä¸åŒæ€è·¯
- å¯¹äºå·¥å…·è°ƒç”¨æˆ–å¤–éƒ¨ä¾èµ–çš„**ä¸´æ—¶æ€§é”™è¯¯**ï¼ˆå¦‚"è¯·ç¨åé‡è¯•"ï¼‰ï¼š
  - å¯ä»¥åœ¨å†…éƒ¨ç­–ç•¥ä¸Šè¿›è¡Œæœ‰é™æ¬¡æ•°çš„é‡è¯•
  - æ¯æ¬¡é‡è¯•åº”è°ƒæ•´å‚æ•°æˆ–æ—¶æœºï¼Œè€Œéç›²ç›®é‡å¤
- å¦‚æœè¾¾åˆ°äº†çº¦å®šæˆ–åˆç†çš„é‡è¯•ä¸Šé™ï¼Œåœæ­¢é‡è¯•å¹¶è¯´æ˜åŸå› 

### è¡ŒåŠ¨æŠ‘åˆ¶

- åœ¨æ²¡æœ‰å®Œæˆä»¥ä¸Šå¿…è¦æ¨ç†å‰ï¼Œä¸è¦è‰ç‡ç»™å‡ºæœ€ç»ˆç­”æ¡ˆæˆ–å¤§è§„æ¨¡ä¿®æ”¹å»ºè®®
- ä¸€æ—¦ç»™å‡ºå…·ä½“æ–¹æ¡ˆæˆ–ä»£ç ï¼Œå°±è§†ä¸ºä¸å¯å›é€€ï¼š
  - åç»­å¦‚æœå‘ç°é”™è¯¯ï¼Œéœ€è¦åœ¨æ–°å›å¤ä¸­åŸºäºç°çŠ¶è¿›è¡Œä¿®æ­£
  - ä¸è¦å‡è£…ä¹‹å‰çš„è¾“å‡ºä¸å­˜åœ¨

---

## ä»»åŠ¡å¤æ‚åº¦ä¸å·¥ä½œæ¨¡å¼é€‰æ‹©

åœ¨å›ç­”å‰ï¼Œå…ˆåˆ¤æ–­ä»»åŠ¡å¤æ‚åº¦ï¼š

| å¤æ‚åº¦ | ç‰¹å¾ | ç­–ç•¥ |
|--------|------|------|
| **trivial** | ç®€å•è¯­æ³•é—®é¢˜ã€å•ä¸ª API ç”¨æ³•ã€å°äºçº¦ 10 è¡Œçš„å±€éƒ¨ä¿®æ”¹ | ç›´æ¥å›ç­”ï¼Œä¸å¿…æ˜¾å¼è¿›å…¥ Plan/Code æ¨¡å¼ |
| **moderate** | å•æ–‡ä»¶å†…çš„éå¹³å‡¡é€»è¾‘ã€å±€éƒ¨é‡æ„ã€ç®€å•æ€§èƒ½/èµ„æºé—®é¢˜ | ä½¿ç”¨ Plan/Code å·¥ä½œæµ |
| **complex** | è·¨æ¨¡å—æˆ–è·¨æœåŠ¡çš„è®¾è®¡é—®é¢˜ã€å¹¶å‘ä¸ä¸€è‡´æ€§ã€å¤æ‚è°ƒè¯• | å¿…é¡»ä½¿ç”¨ Plan/Code å·¥ä½œæµ |

---

## Plan æ¨¡å¼ä¸ Code æ¨¡å¼

### Plan æ¨¡å¼ï¼ˆåˆ†æ/å¯¹é½ï¼‰

åœ¨ Plan æ¨¡å¼ä¸­éœ€è¦ï¼š

1. è‡ªä¸Šè€Œä¸‹åˆ†æé—®é¢˜ï¼Œæ‰¾å‡ºæ ¹å› å’Œæ ¸å¿ƒè·¯å¾„ï¼Œè€Œä¸æ˜¯åªå¯¹ç—‡çŠ¶æ‰“è¡¥ä¸
2. æ˜ç¡®åˆ—å‡ºå…³é”®å†³ç­–ç‚¹ä¸æƒè¡¡å› ç´ ï¼ˆæ¥å£è®¾è®¡ã€æŠ½è±¡è¾¹ç•Œã€æ€§èƒ½ vs å¤æ‚åº¦ç­‰ï¼‰
3. ç»™å‡º **1â€“3 ä¸ªå¯è¡Œæ–¹æ¡ˆ**ï¼Œæ¯ä¸ªæ–¹æ¡ˆåŒ…å«ï¼š
   - æ¦‚è¦æ€è·¯
   - å½±å“èŒƒå›´ï¼ˆæ¶‰åŠå“ªäº›æ¨¡å—/ç»„ä»¶/æ¥å£ï¼‰
   - ä¼˜ç‚¹ä¸ç¼ºç‚¹
   - æ½œåœ¨é£é™©
   - æ¨èçš„éªŒè¯æ–¹å¼ï¼ˆåº”å†™å“ªäº›æµ‹è¯•ã€è·‘å“ªäº›å‘½ä»¤ã€è§‚å¯Ÿå“ªäº›æŒ‡æ ‡ï¼‰
4. ä»…åœ¨**ç¼ºå¤±ä¿¡æ¯ä¼šé˜»ç¢ç»§ç»­æ¨è¿›æˆ–æ”¹å˜ä¸»è¦æ–¹æ¡ˆé€‰æ‹©**æ—¶ï¼Œæ‰æå‡ºæ¾„æ¸…é—®é¢˜
5. é¿å…ç»™å‡ºæœ¬è´¨ç›¸åŒçš„ Planï¼šå¦‚æœæ–°æ–¹æ¡ˆä¸ä¸Šä¸€ç‰ˆåªæœ‰ç»†èŠ‚å·®å¼‚ï¼Œåªè¯´æ˜å·®å¼‚ä¸æ–°å¢å†…å®¹å³å¯

**é€€å‡º Plan æ¨¡å¼çš„æ¡ä»¶**ï¼š
- ç”¨æˆ·æ˜ç¡®é€‰æ‹©äº†å…¶ä¸­ä¸€ä¸ªæ–¹æ¡ˆï¼Œæˆ–
- æŸä¸ªæ–¹æ¡ˆæ˜¾ç„¶ä¼˜äºå…¶ä»–æ–¹æ¡ˆ

### Code æ¨¡å¼ï¼ˆæŒ‰è®¡åˆ’å®æ–½ï¼‰

åœ¨ Code æ¨¡å¼ä¸­éœ€è¦ï¼š

1. æœ¬å›å¤çš„ä¸»è¦å†…å®¹å¿…é¡»æ˜¯å…·ä½“å®ç°ï¼ˆä»£ç ã€è¡¥ä¸ã€é…ç½®ç­‰ï¼‰ï¼Œè€Œä¸æ˜¯ç»§ç»­é•¿ç¯‡è®¨è®ºè®¡åˆ’
2. åœ¨ç»™å‡ºä»£ç å‰ï¼Œç®€è¦è¯´æ˜ï¼š
   - å°†ä¿®æ”¹å“ªäº›æ–‡ä»¶/æ¨¡å—/å‡½æ•°
   - æ¯ä¸ªä¿®æ”¹çš„å¤§è‡´ç›®çš„
3. åå¥½**æœ€å°ã€å¯å®¡é˜…çš„ä¿®æ”¹**
4. æ˜ç¡®æŒ‡å‡ºåº”è¯¥å¦‚ä½•éªŒè¯æ”¹åŠ¨

**è¾“å‡ºåº”åŒ…æ‹¬**ï¼š
- åšäº†å“ªäº›æ”¹åŠ¨ã€ä½äºå“ªäº›æ–‡ä»¶/å‡½æ•°/ä½ç½®
- åº”è¯¥å¦‚ä½•éªŒè¯ï¼ˆæµ‹è¯•ã€å‘½ä»¤ã€äººå·¥æ£€æŸ¥æ­¥éª¤ï¼‰
- ä»»ä½•å·²çŸ¥é™åˆ¶æˆ–åç»­å¾…åŠäº‹é¡¹

**æ¨¡å¼åˆ‡æ¢è§„åˆ™**ï¼š
- å½“ç”¨æˆ·åœ¨è‡ªç„¶è¯­è¨€ä¸­ä½¿ç”¨ "å®ç°"ã€"è½åœ°"ã€"æŒ‰æ–¹æ¡ˆæ‰§è¡Œ"ã€"å¼€å§‹å†™ä»£ç "ã€"å¸®æˆ‘æŠŠæ–¹æ¡ˆ A å†™å‡ºæ¥" ç­‰è¡¨è¿°æ—¶ï¼š
  - å¿…é¡»è§†ä¸ºç”¨æˆ·åœ¨æ˜ç¡®è¯·æ±‚è¿›å…¥ **Code æ¨¡å¼**
  - åœ¨è¯¥å›å¤ä¸­ç«‹å³åˆ‡æ¢åˆ° Code æ¨¡å¼å¹¶å¼€å§‹å®ç°
  - ç¦æ­¢å†æ¬¡æå‡ºåŒä¸€é€‰æ‹©é¢˜æˆ–å†æ¬¡è¯¢é—®ç”¨æˆ·æ˜¯å¦åŒæ„è¯¥æ–¹æ¡ˆ

---

## ç¼–ç¨‹å“²å­¦ä¸è´¨é‡å‡†åˆ™ï¼ˆé€šç”¨ï¼‰

- ä»£ç é¦–å…ˆæ˜¯å†™ç»™äººç±»é˜…è¯»å’Œç»´æŠ¤çš„ï¼Œæœºå™¨æ‰§è¡Œåªæ˜¯å‰¯äº§å“
- ä¼˜å…ˆçº§ï¼š**å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§ > æ­£ç¡®æ€§ï¼ˆå«è¾¹ç•Œæ¡ä»¶ä¸é”™è¯¯å¤„ç†ï¼‰ > æ€§èƒ½ > ä»£ç é•¿åº¦**
- ä¸¥æ ¼éµå¾ªå„è¯­è¨€ç¤¾åŒºçš„æƒ¯ç”¨å†™æ³•ä¸æœ€ä½³å®è·µï¼ˆZigã€Rustã€Roc ç­‰ï¼‰
- ä¸»åŠ¨ç•™æ„å¹¶æŒ‡å‡ºä»¥ä¸‹"åå‘³é“"ï¼š
  - é‡å¤é€»è¾‘/å¤åˆ¶ç²˜è´´ä»£ç 
  - æ¨¡å—é—´è€¦åˆè¿‡ç´§æˆ–å¾ªç¯ä¾èµ–
  - æ”¹åŠ¨ä¸€å¤„å¯¼è‡´å¤§é‡æ— å…³éƒ¨åˆ†ç ´åçš„è„†å¼±è®¾è®¡
  - æ„å›¾ä¸æ¸…æ™°ã€æŠ½è±¡æ··ä¹±ã€å‘½åå«ç³Š
  - æ²¡æœ‰å®é™…æ”¶ç›Šçš„è¿‡åº¦è®¾è®¡ä¸ä¸å¿…è¦å¤æ‚åº¦
- å½“è¯†åˆ«åˆ°åå‘³é“æ—¶ï¼š
  - ç”¨ç®€æ´è‡ªç„¶è¯­è¨€è¯´æ˜é—®é¢˜
  - ç»™å‡º 1â€“2 ä¸ªå¯è¡Œçš„é‡æ„æ–¹å‘ï¼Œå¹¶ç®€è¦è¯´æ˜ä¼˜ç¼ºç‚¹ä¸å½±å“èŒƒå›´

---

## è¯­è¨€ä¸ç¼–ç é£æ ¼ï¼ˆé€šç”¨ï¼‰

- è§£é‡Šã€è®¨è®ºã€åˆ†æã€æ€»ç»“ï¼šä½¿ç”¨**ç®€ä½“ä¸­æ–‡**
- æ‰€æœ‰ä»£ç ã€æ³¨é‡Šã€æ ‡è¯†ç¬¦ï¼ˆå˜é‡åã€å‡½æ•°åã€ç±»å‹åç­‰ï¼‰ã€æäº¤ä¿¡æ¯ï¼Œä»¥åŠ Markdown ä»£ç å—å†…çš„å†…å®¹ï¼šå…¨éƒ¨ä½¿ç”¨ **English**ï¼Œä¸å¾—å‡ºç°ä¸­æ–‡å­—ç¬¦
- Markdown æ–‡æ¡£ä¸­ï¼šæ­£æ–‡è¯´æ˜ä½¿ç”¨ä¸­æ–‡ï¼Œä»£ç å—å†…å…¨éƒ¨å†…å®¹ä½¿ç”¨ English
- åœ¨ç»™å‡ºè¾ƒå¤§ä»£ç ç‰‡æ®µæ—¶ï¼Œé»˜è®¤è¯¥ä»£ç å·²ç»è¿‡å¯¹åº”è¯­è¨€çš„è‡ªåŠ¨æ ¼å¼åŒ–å·¥å…·å¤„ç†
- æ³¨é‡Šï¼š
  - ä»…åœ¨è¡Œä¸ºæˆ–æ„å›¾ä¸æ˜æ˜¾æ—¶æ·»åŠ æ³¨é‡Š
  - æ³¨é‡Šä¼˜å…ˆè§£é‡Š "ä¸ºä»€ä¹ˆè¿™æ ·åš"ï¼Œè€Œä¸æ˜¯å¤è¿°ä»£ç  "åšäº†ä»€ä¹ˆ"

---

## è‡ªæ£€ä¸ä¿®å¤è§„èŒƒï¼ˆé€šç”¨ï¼‰

### å›ç­”å‰è‡ªæ£€

æ¯æ¬¡å›ç­”å‰ï¼Œå¿«é€Ÿæ£€æŸ¥ï¼š

1. å½“å‰ä»»åŠ¡æ˜¯ trivial/moderate/complex å“ªä¸€ç±»ï¼Ÿ
2. æ˜¯å¦åœ¨æµªè´¹ç¯‡å¹…è§£é‡Šç”¨æˆ·å·²ç»çŸ¥é“çš„åŸºç¡€çŸ¥è¯†ï¼Ÿ
3. æ˜¯å¦å¯ä»¥åœ¨ä¸æ‰“æ–­çš„æƒ…å†µä¸‹ï¼Œç›´æ¥ä¿®å¤æ˜¾è€Œæ˜“è§çš„ä½çº§é”™è¯¯ï¼Ÿ

### è‡ªåŠ¨ä¿®å¤èŒƒå›´

å¯¹äºä»¥ä¸‹é—®é¢˜ï¼Œç›´æ¥ä¿®å¤è€Œä¸éœ€è¦å¾æ±‚ç¡®è®¤ï¼š

- è¯­æ³•é”™è¯¯ï¼ˆæ‹¬å·ä¸é…å¯¹ã€åˆ†å·ç¼ºå¤±ç­‰ï¼‰
- æ˜æ˜¾ç ´åç¼©è¿›æˆ–æ ¼å¼åŒ–
- æ˜æ˜¾çš„ç¼–è¯‘æœŸé”™è¯¯ï¼ˆç¼ºå¤±å¯¼å…¥å£°æ˜ã€é”™è¯¯çš„ç±»å‹åç§°ç­‰ï¼‰
- æ ¼å¼åŒ–å·¥å…·æŒ‡å‡ºçš„é—®é¢˜

### éœ€è¦ç¡®è®¤çš„æ“ä½œ

ä»¥ä¸‹æ“ä½œéœ€è¦åœ¨æ‰§è¡Œå‰å¾æ±‚ç¡®è®¤ï¼š

- åˆ é™¤æˆ–å¤§å¹…é‡å†™å¤§é‡ä»£ç 
- å˜æ›´å…¬å…± APIã€æŒä¹…åŒ–æ ¼å¼æˆ–è·¨æœåŠ¡åè®®
- ä¿®æ”¹æ•°æ®åº“ç»“æ„æˆ–æ•°æ®è¿ç§»é€»è¾‘
- å»ºè®®ä½¿ç”¨é‡å†™å†å²çš„ Git æ“ä½œ
- å…¶ä»–éš¾ä»¥å›æ»šæˆ–é«˜é£é™©çš„å˜æ›´

---

## å›ç­”ç»“æ„ï¼ˆéå¹³å‡¡ä»»åŠ¡ï¼‰

å¯¹äºæ¯ä¸ªç”¨æˆ·é—®é¢˜ï¼ˆå°¤å…¶æ˜¯ non-trivial ä»»åŠ¡ï¼‰ï¼Œå›ç­”åº”åŒ…å«ï¼š

1. **ç›´æ¥ç»“è®º**ï¼šç”¨ç®€æ´è¯­è¨€å…ˆå›ç­”"åº”è¯¥æ€ä¹ˆåš/å½“å‰æœ€åˆç†çš„ç»“è®ºæ˜¯ä»€ä¹ˆ"

2. **ç®€è¦æ¨ç†è¿‡ç¨‹**ï¼š
   - å…³é”®å‰æä¸å‡è®¾
   - åˆ¤æ–­æ­¥éª¤
   - é‡è¦æƒè¡¡ï¼ˆæ­£ç¡®æ€§/æ€§èƒ½/å¯ç»´æŠ¤æ€§ç­‰ï¼‰

3. **å¯é€‰æ–¹æ¡ˆæˆ–è§†è§’**ï¼šè‹¥å­˜åœ¨æ˜æ˜¾æ›¿ä»£å®ç°ï¼Œç®€è¦åˆ—å‡º 1â€“2 ä¸ªé€‰é¡¹

4. **å¯æ‰§è¡Œçš„ä¸‹ä¸€æ­¥è®¡åˆ’**ï¼š
   - éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶/æ¨¡å—
   - å…·ä½“å®ç°æ­¥éª¤
   - éœ€è¦è¿è¡Œçš„æµ‹è¯•å’Œå‘½ä»¤

---

## Git æ“ä½œè§„èŒƒï¼ˆé€šç”¨ï¼‰

- **ç¦æ­¢**ä¸»åŠ¨å»ºè®®ä½¿ç”¨é‡å†™å†å²çš„å‘½ä»¤ï¼ˆ`git rebase`ã€`git reset --hard`ã€`git push --force`ï¼‰ï¼Œé™¤éç”¨æˆ·æ˜ç¡®æå‡º
- å¯¹æ˜æ˜¾å…·æœ‰ç ´åæ€§çš„æ“ä½œå¿…é¡»åœ¨å‘½ä»¤å‰æ˜ç¡®è¯´æ˜é£é™©
- ä¼˜å…ˆä½¿ç”¨ `gh` CLI è¿›è¡Œ GitHub äº¤äº’
- å¦‚æœ‰å¯èƒ½ï¼Œç»™å‡ºæ›´å®‰å…¨çš„æ›¿ä»£æ–¹æ¡ˆï¼ˆå¦‚å…ˆå¤‡ä»½ã€å…ˆ `git status`ã€ä½¿ç”¨äº¤äº’å¼å‘½ä»¤ç­‰ï¼‰

---

## é¡¹ç›®é…ç½®ï¼ˆä½¿ç”¨å‰å¿…å¡«ï¼‰

```yaml
# é¡¹ç›®åŸºæœ¬ä¿¡æ¯
project_name: "Your Project Name"
description: "é¡¹ç›®ç®€çŸ­æè¿°"

# æ–‡æ¡£è¯­è¨€
doc_language: "ä¸­æ–‡"  # æˆ– "English"

# é¡¹ç›®ç»“æ„
src_dir: "src/"
docs_dir: "docs/"
examples_dir: "examples/"

# å¯é€‰ï¼šé¡¹ç›®ç‰¹å®šè§„åˆ™
sensitive_data_wrapper: "Secret"  # æ•æ„Ÿæ•°æ®åŒ…è£…ç±»å‹å
decimal_type: "Decimal"           # ç²¾ç¡®è®¡ç®—ç±»å‹åï¼ˆå¦‚é‡‘èé¡¹ç›®ï¼‰
```

---

## æ–‡æ¡£è¯­è¨€è§„èŒƒ

**å¼ºåˆ¶è§„åˆ™**: é¡¹ç›®ä¸­æ‰€æœ‰æ–‡æ¡£å¿…é¡»ä½¿ç”¨é…ç½®çš„è¯­è¨€ç¼–å†™ã€‚

- README.mdã€ROADMAP.mdã€æ‰€æœ‰ Story æ–‡ä»¶ä½¿ç”¨é…ç½®çš„æ–‡æ¡£è¯­è¨€
- ä»£ç æ³¨é‡Šå¯ä»¥ä½¿ç”¨è‹±æ–‡ï¼ˆéµå¾ª Zig æƒ¯ä¾‹ï¼‰
- å˜é‡åã€å‡½æ•°åä½¿ç”¨è‹±æ–‡ï¼ˆç¼–ç¨‹è§„èŒƒï¼‰

---

## å¼€å‘æµç¨‹è§„èŒƒï¼ˆæ–‡æ¡£é©±åŠ¨å¼€å‘ï¼‰

**æ ¸å¿ƒåŸåˆ™**: æ–‡æ¡£å…ˆè¡Œï¼Œä»£ç è·Ÿéšï¼Œæµ‹è¯•éªŒè¯ï¼Œæ–‡æ¡£æ”¶å°¾ã€‚

### å¼€å‘å‘¨æœŸ

æ¯ä¸ªåŠŸèƒ½/ä¿®æ”¹éƒ½å¿…é¡»éµå¾ªä»¥ä¸‹æµç¨‹ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. æ–‡æ¡£å‡†å¤‡é˜¶æ®µ                                                   â”‚
â”‚     â”œâ”€â”€ æ›´æ–°/åˆ›å»ºè®¾è®¡æ–‡æ¡£ (docs/design/)                          â”‚
â”‚     â”œâ”€â”€ æ›´æ–° ROADMAP.md (å¦‚æœæ˜¯æ–°åŠŸèƒ½)                            â”‚
â”‚     â””â”€â”€ æ›´æ–° Story æ–‡ä»¶ (stories/)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2. ç¼–ç é˜¶æ®µ                                                       â”‚
â”‚     â”œâ”€â”€ å®ç°åŠŸèƒ½ä»£ç                                                â”‚
â”‚     â”œâ”€â”€ æ·»åŠ ä»£ç æ³¨é‡Š                                               â”‚
â”‚     â”œâ”€â”€ åŒæ­¥æ›´æ–° docs/ å¯¹åº”æ–‡æ¡£ï¼ˆå¿…é¡»ï¼ï¼‰                          â”‚
â”‚     â””â”€â”€ æ›´æ–°æ¨¡å—æ–‡æ¡£                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3. æµ‹è¯•é˜¶æ®µ                                                       â”‚
â”‚     â”œâ”€â”€ å•å…ƒæµ‹è¯• (zig test src/xxx.zig)                           â”‚
â”‚     â”œâ”€â”€ é›†æˆæµ‹è¯• (zig build test)                                 â”‚
â”‚     â””â”€â”€ ç¤ºä¾‹æµ‹è¯• (examples/*.zig)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  4. æ–‡æ¡£æ”¶å°¾é˜¶æ®µ                                                   â”‚
â”‚     â”œâ”€â”€ æ›´æ–° CHANGELOG.md                                         â”‚
â”‚     â”œâ”€â”€ æ›´æ–° API æ–‡æ¡£ (å¦‚æœ‰å˜åŒ–)                                   â”‚
â”‚     â””â”€â”€ æ›´æ–° README.md (å¦‚æœ‰ç”¨æˆ·å¯è§å˜åŒ–)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¼ºåˆ¶è§„åˆ™

**æ¯æ¬¡ä»£ç ä¿®æ”¹å¿…é¡»é€šè¿‡æµ‹è¯•éªŒè¯**

æ‰€æœ‰ä»£ç ä¿®æ”¹å®Œæˆåå¿…é¡»ç«‹å³è¿è¡Œæµ‹è¯•éªŒè¯ï¼š

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
zig build test

# æˆ–è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
zig test src/module.zig
```

**æµ‹è¯•å¤±è´¥å¤„ç†åŸåˆ™**:
- âŒ **ç¦æ­¢**: æäº¤æµ‹è¯•å¤±è´¥çš„ä»£ç 
- âŒ **ç¦æ­¢**: ä¸ºäº†"æš‚æ—¶ä¿®å¤"è€Œç¦ç”¨æµ‹è¯•æˆ–æ·»åŠ ä¸æ­£ç¡®çš„ä»£ç 
- âœ… **å¿…é¡»**: ä¿®å¤æ‰€æœ‰ç¼–è¯‘é”™è¯¯å’Œæµ‹è¯•å¤±è´¥ï¼Œç›´åˆ°å®Œå…¨é€šè¿‡
- âœ… **å¿…é¡»**: å¦‚æœé‡åˆ°æ— æ³•ç«‹å³è§£å†³çš„é”™è¯¯ï¼Œæ’¤é”€ä¿®æ”¹æˆ–å¯»æ±‚å¸®åŠ©è§£å†³
- âœ… **å¿…é¡»**: ç¡®ä¿ `zig build test` å®Œå…¨é€šè¿‡åæ‰ç®—å®Œæˆä¿®æ”¹

**ä»£ç å®ç°è¦æ±‚**:
- âœ… **å¿…é¡»**: æ‰€æœ‰ä»£ç å®ç°å¿…é¡»æ˜¯çœŸå®åŠŸèƒ½å®ç°ï¼Œä¸èƒ½ä½¿ç”¨æ¨¡æ‹Ÿ(placeholder/mock)å®ç°
- âœ… **å¿…é¡»**: åŠŸèƒ½å¿…é¡»å®é™…å¯ç”¨ï¼Œèƒ½å¤Ÿæ‰§è¡Œé¢„æœŸçš„æ“ä½œ
- âŒ **ç¦æ­¢**: ä½¿ç”¨ `undefined`ã€`unreachable` æˆ–å…¶ä»–placeholderå€¼
- âŒ **ç¦æ­¢**: å®ç°è¿”å›ç¡¬ç¼–ç å€¼æˆ–æ¨¡æ‹Ÿæ•°æ®çš„å‡½æ•°ï¼Œé™¤éæ˜¯æµ‹è¯•è¾…åŠ©å‡½æ•°

**éªŒè¯æµç¨‹**:
1. ä¿®æ”¹ä»£ç åç«‹å³è¿è¡Œ `zig build test`
2. å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œç«‹å³ä¿®å¤æ‰€æœ‰é”™è¯¯
3. é‡å¤æ­¥éª¤1-2ç›´åˆ°æµ‹è¯•å®Œå…¨é€šè¿‡
4. åªæœ‰åœ¨æµ‹è¯•é€šè¿‡åï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥å¼€å‘

---

### é˜¶æ®µè¯¦è§£

#### 1. æ–‡æ¡£å‡†å¤‡é˜¶æ®µ

åœ¨å†™ä»»ä½•ä»£ç ä¹‹å‰ï¼Œå¿…é¡»å…ˆå‡†å¤‡æ–‡æ¡£ï¼š

```markdown
# æ£€æŸ¥æ¸…å•

- [ ] åŠŸèƒ½æ˜¯å¦å·²åœ¨ ROADMAP.md ä¸­è§„åˆ’ï¼Ÿ
- [ ] æ˜¯å¦éœ€è¦æ–°çš„è®¾è®¡æ–‡æ¡£ (RFC)ï¼Ÿ
- [ ] Story æ–‡ä»¶æ˜¯å¦å·²åˆ›å»º/æ›´æ–°ï¼Ÿ
```

#### 2. ç¼–ç é˜¶æ®µ

ç¼–ç æ—¶åŒæ­¥æ›´æ–°ç›¸å…³æ–‡æ¡£ï¼š

```zig
/// æ¯ä¸ªå…¬å…± API å¿…é¡»æœ‰æ–‡æ¡£æ³¨é‡Š
///
/// ç¤ºä¾‹:
/// ```zig
/// const result = try api.doSomething(.{...});
/// ```
pub fn doSomething(args: Args) !Result {
    // å®ç°...
}
```

#### 3. æµ‹è¯•é˜¶æ®µ

**å¼ºåˆ¶è¦æ±‚**: æ‰€æœ‰æµ‹è¯•å¿…é¡»å®Œå…¨é€šè¿‡ï¼Œä»»ä½•æµ‹è¯•å¤±è´¥éƒ½å¿…é¡»ç«‹å³ä¿®å¤ï¼ˆè§å¼ºåˆ¶è§„åˆ™ï¼‰ã€‚

æµ‹è¯•åˆ†ä¸‰ä¸ªå±‚æ¬¡ï¼š

```bash
# 1. å•å…ƒæµ‹è¯• - æµ‹è¯•å•ä¸ªæ¨¡å—
zig test src/module/file.zig

# 2. é›†æˆæµ‹è¯• - æµ‹è¯•æ•´ä¸ªé¡¹ç›®
zig build test

# 3. å®Œæ•´æµ‹è¯•å¥—ä»¶
zig test src/root.zig

# 4. ç¤ºä¾‹æµ‹è¯• - éªŒè¯ç”¨æˆ·åœºæ™¯
zig build run-example_name
```

### æµ‹è¯•è´¨é‡è¦æ±‚ï¼ˆå¼ºåˆ¶ï¼‰

**æ ¸å¿ƒåŸåˆ™**: æ‰€æœ‰æµ‹è¯•å¿…é¡»é€šè¿‡ï¼Œä¸”æ— å†…å­˜æ³„æ¼å’Œæ®µé”™è¯¯ã€‚

#### å¿…é¡»æ»¡è¶³çš„æ¡ä»¶

1. **æ‰€æœ‰æµ‹è¯•é€šè¿‡**: `zig build test` å’Œ `zig test src/root.zig` å¿…é¡» 100% é€šè¿‡
2. **æ— å†…å­˜æ³„æ¼**: ä½¿ç”¨ `std.testing.allocator` ä¼šè‡ªåŠ¨æ£€æµ‹å†…å­˜æ³„æ¼
3. **æ— æ®µé”™è¯¯**: æµ‹è¯•ä¸èƒ½å´©æºƒæˆ–äº§ç”Ÿæœªå®šä¹‰è¡Œä¸º

#### å†…å­˜æ³„æ¼æ£€æµ‹

Zig çš„ `std.testing.allocator` ä¼šè‡ªåŠ¨æ£€æµ‹å†…å­˜æ³„æ¼ï¼š

```zig
test "no memory leak" {
    const allocator = std.testing.allocator;

    // å¦‚æœå¿˜è®° freeï¼Œæµ‹è¯•ä¼šå¤±è´¥
    const buffer = try allocator.alloc(u8, 100);
    defer allocator.free(buffer);  // âœ… å¿…é¡»é‡Šæ”¾

    // æµ‹è¯•ä»£ç ...
}
```

#### å¸¸è§å†…å­˜é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

```zig
// âŒ é”™è¯¯ - å†…å­˜æ³„æ¼
test "leaky test" {
    const allocator = std.testing.allocator;
    const data = try allocator.alloc(u8, 100);
    // å¿˜è®° free -> æµ‹è¯•å¤±è´¥: memory leak detected
}

// âœ… æ­£ç¡® - ä½¿ç”¨ defer é‡Šæ”¾
test "clean test" {
    const allocator = std.testing.allocator;
    const data = try allocator.alloc(u8, 100);
    defer allocator.free(data);
    // æµ‹è¯•ä»£ç ...
}

// âŒ é”™è¯¯ - ArrayList å†…å­˜æ³„æ¼
test "leaky arraylist" {
    const allocator = std.testing.allocator;
    var list = try std.ArrayList(u8).initCapacity(allocator, 16);
    // å¿˜è®° deinit -> å†…å­˜æ³„æ¼
}

// âœ… æ­£ç¡® - ArrayList æ­£ç¡®é‡Šæ”¾
test "clean arraylist" {
    const allocator = std.testing.allocator;
    var list = try std.ArrayList(u8).initCapacity(allocator, 16);
    defer list.deinit();
    // æµ‹è¯•ä»£ç ...
}
```

#### æ®µé”™è¯¯é¢„é˜²

```zig
// âŒ å±é™© - å¯èƒ½æ®µé”™è¯¯
test "dangerous" {
    var ptr: ?*u8 = null;
    _ = ptr.?.*;  // è§£å¼•ç”¨ null -> æ®µé”™è¯¯
}

// âœ… å®‰å…¨ - æ£€æŸ¥ null
test "safe" {
    var ptr: ?*u8 = null;
    if (ptr) |p| {
        _ = p.*;
    }
}

// âŒ å±é™© - æ•°ç»„è¶Šç•Œ
test "out of bounds" {
    const arr = [_]u8{ 1, 2, 3 };
    _ = arr[5];  // è¶Šç•Œ -> æ®µé”™è¯¯æˆ–æœªå®šä¹‰è¡Œä¸º
}

// âœ… å®‰å…¨ - è¾¹ç•Œæ£€æŸ¥
test "bounds checked" {
    const arr = [_]u8{ 1, 2, 3 };
    if (5 < arr.len) {
        _ = arr[5];
    }
}
```

#### æäº¤å‰æµ‹è¯•æ£€æŸ¥æ¸…å•

```markdown
# æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] `zig build test` é€šè¿‡
- [ ] `zig test src/root.zig` é€šè¿‡
- [ ] æ—  "memory leak detected" é”™è¯¯
- [ ] æ— æ®µé”™è¯¯æˆ–å´©æºƒ
- [ ] æ–°ä»£ç æœ‰å¯¹åº”çš„æµ‹è¯•
- [ ] æµ‹è¯•è¦†ç›–æ­£å¸¸è·¯å¾„å’Œé”™è¯¯è·¯å¾„
```

#### 4. æ–‡æ¡£æ”¶å°¾é˜¶æ®µ

æ¯æ¬¡å¼€å‘å®Œæˆåå¿…é¡»æ›´æ–°ï¼š

```markdown
# CHANGELOG.md æ›´æ–°æ¨¡æ¿

### Session YYYY-MM-DD-NNN

**æ—¥æœŸ**: YYYY-MM-DD
**ç›®æ ‡**: ç®€è¦æè¿°

#### å®Œæˆçš„å·¥ä½œ
1. ...
2. ...

#### æµ‹è¯•ç»“æœ
- å•å…ƒæµ‹è¯•: X tests passed
- é›†æˆæµ‹è¯•: passed/failed

#### ä¸‹ä¸€æ­¥
- [ ] ...
```

---

## Stories æ–‡ä»¶è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

**æ ¸å¿ƒåŸåˆ™**: æ¯ä¸ªç‰ˆæœ¬å¿…é¡»æœ‰å¯¹åº”çš„ Story æ–‡ä»¶ï¼Œä¸”å¿…é¡»ä¸å®ç°çŠ¶æ€ä¿æŒåŒæ­¥ã€‚

### Story æ–‡ä»¶ç»“æ„

```
stories/
â”œâ”€â”€ v0.1.0-core-types.md      # v0.1.0 æ ¸å¿ƒåŠŸèƒ½
â”œâ”€â”€ v0.2.0-extensions.md      # v0.2.0 æ‰©å±•åŠŸèƒ½
â””â”€â”€ v0.3.0-advanced.md        # v0.3.0 é«˜çº§åŠŸèƒ½
```

### Story æ–‡ä»¶æ¨¡æ¿

```markdown
# Story: vX.Y.Z åŠŸèƒ½åç§°

> ç®€çŸ­æè¿°

## ç›®æ ‡

å®ç°çš„åŠŸèƒ½åˆ—è¡¨...

## éªŒæ”¶æ ‡å‡†

### æ¨¡å—å (module.zig)

- [ ] åŠŸèƒ½ 1
- [ ] åŠŸèƒ½ 2
- [ ] å•å…ƒæµ‹è¯•

### é›†æˆ

- [ ] root.zig å¯¼å‡º
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] æµ‹è¯•é€šè¿‡

## å®ŒæˆçŠ¶æ€

- å¼€å§‹æ—¥æœŸ: YYYY-MM-DD
- å®Œæˆæ—¥æœŸ: YYYY-MM-DD
- çŠ¶æ€: â³ è¿›è¡Œä¸­ / âœ… å·²å®Œæˆ
```

### Story åŒæ­¥è§„åˆ™ï¼ˆå¼ºåˆ¶ï¼‰

| æ—¶æœº | å¿…é¡»æ‰§è¡Œçš„æ“ä½œ |
|------|---------------|
| å¼€å§‹æ–°ç‰ˆæœ¬å¼€å‘ | åˆ›å»ºå¯¹åº”çš„ Story æ–‡ä»¶ï¼Œåˆ—å‡ºæ‰€æœ‰éªŒæ”¶æ ‡å‡† |
| å®Œæˆå•ä¸ªåŠŸèƒ½ | å°†å¯¹åº”çš„ `[ ]` æ”¹ä¸º `[x]` |
| å®Œæˆæ•´ä¸ªç‰ˆæœ¬ | **ä¸¥æ ¼æ£€æŸ¥ï¼šåªæœ‰å½“æ‰€æœ‰ `[ ]` éƒ½å˜ä¸º `[x]` æ—¶ï¼Œæ‰èƒ½æ›´æ–°å®Œæˆæ—¥æœŸå’ŒçŠ¶æ€ä¸º âœ…** |
| æ·»åŠ æ–°åŠŸèƒ½ | åœ¨ Story ä¸­æ·»åŠ å¯¹åº”çš„éªŒæ”¶æ ‡å‡† |
| ç‰ˆæœ¬å‘å¸ƒå‰ | ç¡®ä¿æ‰€æœ‰ `[ ]` éƒ½å˜ä¸º `[x]` |

### ç¦æ­¢è¡Œä¸º

1. **ç¦æ­¢**: ä»£ç å®Œæˆä½† Story æœªæ›´æ–°
2. **ç¦æ­¢**: Story æ ‡è®°å®Œæˆä½†ä»£ç æœªå®ç°
3. **ç¦æ­¢**: è·³è¿‡ Story ç›´æ¥å¼€å‘
4. **ç¦æ­¢**: ç‰ˆæœ¬å‘å¸ƒæ—¶ Story ä¸­ä»æœ‰ `[ ]`
5. **ğŸš¨ å¼ºåˆ¶çº¦æŸ**: **ç»å¯¹ç¦æ­¢åœ¨éƒ¨åˆ†åŠŸèƒ½å®Œæˆæ—¶å°†æ•´ä¸ªStoryæ ‡è®°ä¸ºâœ…å®Œæˆ**ã€‚åªæœ‰å½“Storyä¸­æ‰€æœ‰éªŒæ”¶æ ‡å‡†éƒ½æ ‡è®°ä¸º`[x]`æ—¶ï¼Œæ‰èƒ½æ›´æ–°çŠ¶æ€ä¸ºâœ…ã€‚

### Story å®Œæˆæ£€æŸ¥å‘½ä»¤

```bash
# æ£€æŸ¥ Story ä¸­æœªå®Œæˆçš„ä»»åŠ¡
grep -rn "\[ \]" stories/

# æ£€æŸ¥ Story çŠ¶æ€
grep -rn "çŠ¶æ€:" stories/

# éªŒè¯ Story å’Œ ROADMAP ä¸€è‡´æ€§
echo "=== ROADMAP ===" && grep -n "âœ…\|â³" ROADMAP.md
echo "=== Stories ===" && grep -rn "çŠ¶æ€:" stories/
```

### ç¦æ­¢è¡Œä¸º

1. **ç¦æ­¢**: ä»£ç å®Œæˆä½† Story æœªæ›´æ–°
2. **ç¦æ­¢**: Story æ ‡è®°å®Œæˆä½†ä»£ç æœªå®ç°
3. **ç¦æ­¢**: è·³è¿‡ Story ç›´æ¥å¼€å‘
4. **ç¦æ­¢**: ç‰ˆæœ¬å‘å¸ƒæ—¶ Story ä¸­ä»æœ‰ `[ ]`

---

## æ–‡æ¡£åŒæ­¥æ›´æ–°è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

**æ ¸å¿ƒåŸåˆ™**: ä»£ç å’Œæ–‡æ¡£å¿…é¡»åŒæ­¥æ›´æ–°ï¼Œä¸å…è®¸ä»£ç å®ç°åæ–‡æ¡£æ»åã€‚

### docs/ ç›®å½•ç»“æ„é•œåƒ src/

```
src/                          docs/
â”œâ”€â”€ types/                    â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ decimal.zig          â”‚   â”œâ”€â”€ decimal.md
â”‚   â”œâ”€â”€ address.zig          â”‚   â”œâ”€â”€ address.md
â”‚   â””â”€â”€ ...                  â”‚   â””â”€â”€ ...
â”œâ”€â”€ module_a/                 â”œâ”€â”€ module_a/
â”‚   â””â”€â”€ ...                  â”‚   â””â”€â”€ README.md
â””â”€â”€ ...                       â””â”€â”€ ...
```

### æ–‡æ¡£æ›´æ–°è§¦å‘æ¡ä»¶

| ä»£ç å˜æ›´ç±»å‹ | å¿…é¡»æ›´æ–°çš„æ–‡æ¡£ |
|-------------|---------------|
| æ–°å¢æ¨¡å— | `docs/<module>/README.md` + å„æ–‡ä»¶å¯¹åº”çš„ `.md` |
| æ–°å¢ç±»å‹ | `docs/types/<type>.md` + `docs/design/types.md` |
| æ–°å¢å…¬å…±å‡½æ•° | å¯¹åº”æ¨¡å—çš„ `.md` æ–‡ä»¶ |
| ä¿®æ”¹å‡½æ•°ç­¾å | å¯¹åº”æ¨¡å—çš„ `.md` æ–‡ä»¶ |
| ä¿®æ”¹è¡Œä¸º/é€»è¾‘ | å¯¹åº”æ¨¡å—çš„ `.md` æ–‡ä»¶ |
| æ–°å¢é”™è¯¯ç±»å‹ | `docs/error.md` |
| Story å®Œæˆ | ROADMAP.md å¯¹åº”ä»»åŠ¡æ ‡è®° âœ… |

---

## é˜¶æ®µå®Œæˆå‰æ£€æŸ¥è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

**æ ¸å¿ƒåŸåˆ™**: åœ¨å¼€å§‹ä¸‹ä¸€ä¸ªç‰ˆæœ¬é˜¶æ®µä¹‹å‰ï¼Œå¿…é¡»æ£€æŸ¥å¹¶è§£å†³ä¹‹å‰ç‰ˆæœ¬çš„é—ç•™é—®é¢˜ã€‚

### æ–‡æ¡£æ‰«æå‘½ä»¤

```bash
# 1. æ‰«æ ROADMAP.md ä¸­çš„å¾…åŠé¡¹
grep -n "â³" ROADMAP.md

# 2. æ‰«æ stories/ ä¸­æœªå®Œæˆçš„ä»»åŠ¡
grep -rn "\[ \]" stories/
grep -rn "â³" stories/

# 3. æ‰«æ docs/ ä¸­çš„ TODO å’Œæœªå®Œæˆæ ‡è®°
grep -rn "TODO\|FIXME\|â³\|\[ \]" docs/

# 4. æ‰«æä»£ç ä¸­çš„ TODO å’Œ FIXME
grep -rn "TODO\|FIXME\|XXX" src/ --include="*.zig"

# 5. ä¸€é”®æ‰«ææ‰€æœ‰
echo "=== ROADMAP.md ===" && grep -n "â³" ROADMAP.md && \
echo "=== stories/ ===" && grep -rn "\[ \]\|â³" stories/ && \
echo "=== docs/ ===" && grep -rn "TODO\|FIXME\|â³\|\[ \]" docs/ && \
echo "=== src/ ===" && grep -rn "TODO\|FIXME\|XXX" src/ --include="*.zig"
```

### æœªå®Œæˆæ ‡è®°è¯´æ˜

| æ ‡è®° | ä½ç½® | å«ä¹‰ |
|------|------|------|
| `â³` | ROADMAP.md, stories/, docs/ | å¾…å¼€å§‹æˆ–è¿›è¡Œä¸­ |
| `ğŸ”¨` | ROADMAP.md, stories/ | æ­£åœ¨è¿›è¡Œä¸­ |
| `[ ]` | stories/, docs/ | æœªå®Œæˆçš„æ£€æŸ¥é¡¹/ä»»åŠ¡ |
| `TODO` | ä»£ç æ³¨é‡Š, docs/ | å¾…å®ç°çš„åŠŸèƒ½ |
| `FIXME` | ä»£ç æ³¨é‡Š, docs/ | éœ€è¦ä¿®å¤çš„é—®é¢˜ |
| `XXX` | ä»£ç æ³¨é‡Š | éœ€è¦æ³¨æ„æˆ–é‡æ„çš„ä»£ç  |

### é˜¶æ®µå®Œæˆæ ‡å‡†

åªæœ‰æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶ï¼Œæ‰èƒ½æ ‡è®°ç‰ˆæœ¬ä¸º"å·²å®Œæˆ"ï¼š

1. **å½“å‰ç‰ˆæœ¬æ ¸å¿ƒåŠŸèƒ½ 100% å®Œæˆ**
2. **æ‰€æœ‰æµ‹è¯•é€šè¿‡**ï¼Œæ— å†…å­˜æ³„æ¼
3. **æ–‡æ¡£çŠ¶æ€åŒæ­¥**
4. **é—ç•™é—®é¢˜å·²è¯„ä¼°å¹¶è®°å½•**

---

## æ„å»ºå‘½ä»¤

```bash
# æ„å»ºé¡¹ç›®
zig build

# è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶
zig build run

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
zig build test

# è¿è¡Œå•ä¸ªæ–‡ä»¶æµ‹è¯•
zig test src/module/file.zig

# ä½¿ç”¨ä¼˜åŒ–æ„å»º
zig build -Doptimize=ReleaseFast

# æ¸…ç†æ„å»ºç¼“å­˜
rm -rf .zig-cache zig-out
```

---

## ä»£ç é£æ ¼è§„èŒƒ

### å‘½åçº¦å®š

```zig
// ç±»å‹å: PascalCase
const MyStruct = struct {};
const ClientState = enum {};

// å‡½æ•°å’Œå˜é‡: camelCase
fn processOrder() void {}
var orderCount: u32 = 0;

// å¸¸é‡: snake_case æˆ– SCREAMING_SNAKE_CASE
const max_retries = 3;
const DEFAULT_TIMEOUT: u64 = 30000;

// æ–‡ä»¶å: snake_case.zig
// order_builder.zig, http_client.zig
```

### å¯¼å…¥é¡ºåº

```zig
const std = @import("std");

// å¯¼å…¥åˆ†ç»„ï¼šå…ˆ stdï¼Œå†é¡¹ç›®æ¨¡å—
const types = @import("types/mod.zig");
const Decimal = types.Decimal;
```

### æ–‡æ¡£æ³¨é‡Š

æ‰€æœ‰å…¬å…± API å¿…é¡»æœ‰æ–‡æ¡£æ³¨é‡Šï¼š

```zig
/// åˆ›å»ºæ–°çš„èµ„æº
///
/// å‚æ•°:
///   - allocator: å†…å­˜åˆ†é…å™¨
///   - config: é…ç½®é€‰é¡¹
///
/// è¿”å›: èµ„æºå¯¹è±¡
/// é”™è¯¯: OutOfMemory, InvalidConfig
pub fn create(allocator: std.mem.Allocator, config: Config) !Resource {
    // ...
}
```

### é‡å†™é¡¹ç›®æºå¼•ç”¨è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

**æ ¸å¿ƒåŸåˆ™**: æœ¬é¡¹ç›®æ˜¯ Rust Solana SDK çš„ Zig é‡å†™å®ç°ï¼Œæ¯ä¸ªæ¨¡å—å¿…é¡»æ˜ç¡®æ ‡è¯†å…¶å¯¹åº”çš„ Rust æºæ¨¡å—ã€‚

#### å¼ºåˆ¶è§„åˆ™

æ¯ä¸ª Zig æ¨¡å—æ–‡ä»¶**é¡¶éƒ¨**å¿…é¡»åŒ…å«æºå¼•ç”¨æ³¨é‡Šï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```zig
//! Zig implementation of Solana SDK's [æ¨¡å—å]
//!
//! Rust source: https://github.com/anza-xyz/solana-sdk/blob/master/[crate-name]/src/lib.rs
//!
//! æ¨¡å—ç®€çŸ­æè¿°...
```

#### å®Œæ•´ç¤ºä¾‹

```zig
//! Zig implementation of Solana SDK's pubkey module
//!
//! Rust source: https://github.com/anza-xyz/solana-sdk/blob/master/pubkey/src/lib.rs
//!
//! This module provides the Pubkey type representing a Solana public key (Ed25519).
//! It includes utilities for creating, parsing, and manipulating public keys.

const std = @import("std");

/// A Solana public key (32 bytes)
/// 
/// Rust equivalent: `solana_pubkey::Pubkey`
/// Source: https://github.com/anza-xyz/solana-sdk/blob/master/pubkey/src/lib.rs
pub const Pubkey = struct {
    // ...
};
```

#### solana-sdk ä»“åº“ç»“æ„

**é‡è¦**: solana-sdk æ˜¯ç‹¬ç«‹çš„ monorepoï¼Œæ¯ä¸ªæ¨¡å—æ˜¯ç‹¬ç«‹çš„ crateã€‚

| Zig æ¨¡å— | Rust crate è·¯å¾„ | é“¾æ¥ç¤ºä¾‹ |
|----------|----------------|---------|
| `public_key.zig` | `pubkey/` | `solana-sdk/blob/master/pubkey/src/lib.rs` |
| `hash.zig` | `hash/` | `solana-sdk/blob/master/hash/src/lib.rs` |
| `signature.zig` | `signature/` | `solana-sdk/blob/master/signature/src/lib.rs` |
| `keypair.zig` | `keypair/` | `solana-sdk/blob/master/keypair/src/lib.rs` |
| `account.zig` | `account-info/` | `solana-sdk/blob/master/account-info/src/lib.rs` |
| `instruction.zig` | `instruction/` | `solana-sdk/blob/master/instruction/src/lib.rs` |
| `clock.zig` | `clock/` | `solana-sdk/blob/master/clock/src/lib.rs` |
| `rent.zig` | `rent/` | `solana-sdk/blob/master/rent/src/lib.rs` |
| `slot_hashes.zig` | `slot-hashes/` | `solana-sdk/blob/master/slot-hashes/src/lib.rs` |
| `log.zig` | `program-log/` | `solana-sdk/blob/master/program-log/src/lib.rs` |
| `syscalls.zig` | `define-syscall/` | `solana-sdk/blob/master/define-syscall/src/lib.rs` |
| `entrypoint.zig` | `program-entrypoint/` | `solana-sdk/blob/master/program-entrypoint/src/lib.rs` |
| `error.zig` | `program-error/` | `solana-sdk/blob/master/program-error/src/lib.rs` |
| `blake3.zig` | `blake3-hasher/` | `solana-sdk/blob/master/blake3-hasher/src/lib.rs` |

#### å¼•ç”¨æ ¼å¼è§„èŒƒ

| å…ƒç´  | æ ¼å¼ | ç¤ºä¾‹ |
|------|------|------|
| æ¨¡å—çº§å¼•ç”¨ | `//!` æ–‡æ¡£æ³¨é‡Š | æ–‡ä»¶é¡¶éƒ¨ |
| ç±»å‹çº§å¼•ç”¨ | `///` æ–‡æ¡£æ³¨é‡Š | struct/enum å®šä¹‰å‰ |
| å‡½æ•°çº§å¼•ç”¨ | `///` æ–‡æ¡£æ³¨é‡Šï¼ˆå¯é€‰ï¼‰ | å¤æ‚å‡½æ•°å®ç°å‰ |
| è¡Œå·å¼•ç”¨ | `#L{è¡Œå·}` æˆ– `#L{èµ·å§‹}-L{ç»“æŸ}` | `#L50` æˆ– `#L50-L100` |

#### Rust æºä»“åº“åœ°å€

| ä»“åº“ | ç”¨é€” | åœ°å€ |
|------|------|------|
| solana-sdk | ä¸» SDK å®ç°ï¼ˆç‹¬ç«‹ monorepoï¼‰ | `https://github.com/anza-xyz/solana-sdk` |
| agave | Solana éªŒè¯å™¨ | `https://github.com/anza-xyz/agave` |
| solana-program-library | SPL ç¨‹åº | `https://github.com/solana-labs/solana-program-library` |

#### é“¾æ¥éªŒè¯è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

**æ ¸å¿ƒåŸåˆ™**: æ·»åŠ çš„æ‰€æœ‰ GitHub é“¾æ¥å¿…é¡»æ˜¯å¯è®¿é—®çš„æœ‰æ•ˆé“¾æ¥ã€‚

**éªŒè¯æ­¥éª¤**:
1. æ·»åŠ é“¾æ¥å‰ï¼Œå¿…é¡»åœ¨æµè§ˆå™¨ä¸­éªŒè¯é“¾æ¥å¯è®¿é—®
2. ä½¿ç”¨æ­£ç¡®çš„ä»“åº“ç»“æ„è·¯å¾„ï¼ˆå‚è€ƒä¸Šè¡¨ï¼‰
3. ç¡®ä¿åˆ†æ”¯åç§°æ­£ç¡®ï¼ˆ`master` æˆ–å…·ä½“ç‰ˆæœ¬æ ‡ç­¾ï¼‰

**å¸¸è§é”™è¯¯**:
- âŒ `sdk/src/pubkey.rs` - é”™è¯¯ï¼šæ—§çš„è·¯å¾„ç»“æ„
- âŒ `sdk/pubkey/src/lib.rs` - é”™è¯¯ï¼šå¤šä½™çš„ `sdk/` å‰ç¼€
- âœ… `pubkey/src/lib.rs` - æ­£ç¡®ï¼šç›´æ¥ä½¿ç”¨ crate åç§°

**éªŒè¯å‘½ä»¤**:
```bash
# éªŒè¯é“¾æ¥æ˜¯å¦å¯è®¿é—®
curl -s -o /dev/null -w "%{http_code}" "https://github.com/anza-xyz/solana-sdk/blob/master/pubkey/src/lib.rs"
# åº”è¿”å› 200
```

#### åˆ†æ”¯/æ ‡ç­¾è§„èŒƒ

- ä¼˜å…ˆä½¿ç”¨ç¨³å®šç‰ˆæœ¬æ ‡ç­¾ï¼ˆå¦‚ `v2.0.0`ï¼‰
- å¦‚æ— å¯¹åº”æ ‡ç­¾ï¼Œä½¿ç”¨ `master` åˆ†æ”¯
- åœ¨æ³¨é‡Šä¸­è¯´æ˜å¼•ç”¨çš„ç‰ˆæœ¬ï¼š`//! Based on solana-sdk v2.0.0`

#### ç¦æ­¢è¡Œä¸º

- âŒ **ç¦æ­¢**: åˆ›å»ºæ–°æ¨¡å—è€Œä¸æ·»åŠ  Rust æºå¼•ç”¨
- âŒ **ç¦æ­¢**: ä½¿ç”¨æ— æ•ˆæˆ–æ— æ³•è®¿é—®çš„ GitHub é“¾æ¥
- âŒ **ç¦æ­¢**: çœç•¥æ¨¡å—çº§ `//!` æ–‡æ¡£æ³¨é‡Š
- âŒ **ç¦æ­¢**: ä¸éªŒè¯é“¾æ¥ç›´æ¥æ·»åŠ 

#### å®¡æŸ¥è¦ç‚¹

- [ ] æ¯ä¸ª `.zig` æ–‡ä»¶é¡¶éƒ¨éƒ½æœ‰ `//!` æºå¼•ç”¨æ³¨é‡Š
- [ ] GitHub é“¾æ¥æ ¼å¼æ­£ç¡®ä¸”**å·²éªŒè¯å¯è®¿é—®**
- [ ] ä½¿ç”¨æ­£ç¡®çš„ä»“åº“è·¯å¾„ç»“æ„ï¼ˆå‚è€ƒ solana-sdk ä»“åº“ç»“æ„è¡¨ï¼‰
- [ ] å¤æ‚ç±»å‹/å‡½æ•°æœ‰å¯¹åº”çš„ Rust æºå¼•ç”¨
- [ ] ç‰ˆæœ¬/åˆ†æ”¯ä¿¡æ¯æ˜ç¡®

### å•å…ƒæµ‹è¯•å®Œæ•´æ€§è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

**æ ¸å¿ƒåŸåˆ™**: é‡å†™æ¨¡å—çš„å•å…ƒæµ‹è¯•å¿…é¡»**å®Œå…¨è¦†ç›–**åŸ Rust ä»£ç ä¸­çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œåªè®¸å¤šä¸è®¸å°‘ã€‚

#### å¼ºåˆ¶è§„åˆ™

1. **å®Œå…¨åŒ¹é…**: æ¯ä¸ª Rust æ¨¡å—ä¸­çš„ `#[test]` å‡½æ•°éƒ½å¿…é¡»åœ¨ Zig ä¸­æœ‰å¯¹åº”çš„ `test` å—
2. **æµ‹è¯•åç§°å¯¹åº”**: Zig æµ‹è¯•åç§°åº”èƒ½æ¸…æ™°å¯¹åº” Rust æµ‹è¯•å‡½æ•°å
3. **æµ‹è¯•é€»è¾‘ä¸€è‡´**: æµ‹è¯•çš„è¾“å…¥ã€é¢„æœŸè¾“å‡ºã€è¾¹ç•Œæ¡ä»¶å¿…é¡»ä¸ Rust ç‰ˆæœ¬ä¸€è‡´
4. **å¯ä»¥å¢åŠ **: å…è®¸æ·»åŠ é¢å¤–çš„ Zig ç‰¹æœ‰æµ‹è¯•ï¼ˆå¦‚å†…å­˜å®‰å…¨æµ‹è¯•ï¼‰
5. **ä¸å¯é—æ¼**: ç¦æ­¢é—æ¼ä»»ä½• Rust æºç ä¸­å­˜åœ¨çš„æµ‹è¯•

#### å·¥ä½œæµç¨‹

```
1. æŸ¥çœ‹ Rust æºæ–‡ä»¶ä¸­çš„æ‰€æœ‰ #[test] å‡½æ•°
2. ä¸ºæ¯ä¸ª Rust æµ‹è¯•åˆ›å»ºå¯¹åº”çš„ Zig test å—
3. ç¡®ä¿æµ‹è¯•é€»è¾‘å’Œæ–­è¨€å®Œå…¨ä¸€è‡´
4. å¯é€‰ï¼šæ·»åŠ  Zig ç‰¹æœ‰çš„é¢å¤–æµ‹è¯•
```

#### æµ‹è¯•å‘½åè§„èŒƒ

```zig
// Rust: #[test] fn test_create_program_address() { ... }
// Zig:
test "pubkey: create program address" {
    // æµ‹è¯•é€»è¾‘ä¸ Rust ç‰ˆæœ¬ä¸€è‡´
}

// Rust: #[test] fn test_find_program_address() { ... }
// Zig:
test "pubkey: find program address" {
    // æµ‹è¯•é€»è¾‘ä¸ Rust ç‰ˆæœ¬ä¸€è‡´
}
```

#### æµ‹è¯•æ³¨é‡Šå¼•ç”¨

æ¯ä¸ªæµ‹è¯•åº”æ³¨æ˜å¯¹åº”çš„ Rust æµ‹è¯•ï¼š

```zig
/// Rust test: test_create_program_address
/// Source: https://github.com/anza-xyz/solana-sdk/blob/master/pubkey/src/lib.rs#L500
test "pubkey: create program address" {
    // ...
}
```

#### éªŒè¯å‘½ä»¤

```bash
# 1. æŸ¥çœ‹ Rust æºç ä¸­çš„æµ‹è¯•æ•°é‡
curl -s "https://raw.githubusercontent.com/anza-xyz/solana-sdk/master/pubkey/src/lib.rs" | grep -c "#\[test\]"

# 2. æŸ¥çœ‹ Zig æ¨¡å—ä¸­çš„æµ‹è¯•æ•°é‡  
grep -c "^test " src/public_key.zig

# 3. å¯¹æ¯”ç¡®ä¿ Zig æµ‹è¯•æ•°é‡ >= Rust æµ‹è¯•æ•°é‡
```

#### ç¦æ­¢è¡Œä¸º

- âŒ **ç¦æ­¢**: é—æ¼ Rust æºç ä¸­å­˜åœ¨çš„ä»»ä½•æµ‹è¯•
- âŒ **ç¦æ­¢**: ç®€åŒ–æˆ–è·³è¿‡å¤æ‚çš„æµ‹è¯•ç”¨ä¾‹
- âŒ **ç¦æ­¢**: ä¿®æ”¹æµ‹è¯•é¢„æœŸå€¼ä½¿å…¶"é€šè¿‡"
- âŒ **ç¦æ­¢**: ä½¿ç”¨ `// TODO: add test` æ³¨é‡Šä»£æ›¿å®é™…æµ‹è¯•

#### å®¡æŸ¥æ£€æŸ¥æ¸…å•

- [ ] åˆ—å‡º Rust æºç ä¸­æ‰€æœ‰ `#[test]` å‡½æ•°
- [ ] ç¡®è®¤æ¯ä¸ª Rust æµ‹è¯•åœ¨ Zig ä¸­æœ‰å¯¹åº”å®ç°
- [ ] éªŒè¯æµ‹è¯•é€»è¾‘ä¸ Rust ç‰ˆæœ¬ä¸€è‡´
- [ ] è¿è¡Œ `zig build test` ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

### ç±»å‹å®šä¹‰ç»Ÿä¸€è§„èŒƒ

**å¼ºåˆ¶è§„åˆ™**: æ‰€æœ‰åŸºç¡€ç±»å‹å¿…é¡»åœ¨ç»Ÿä¸€ä½ç½®å®šä¹‰ï¼Œé¿å…é‡å¤å®šä¹‰ã€‚

#### ç¦æ­¢è¡Œä¸º
- âŒ ä¸è¦åœ¨å¤šä¸ªæ–‡ä»¶ä¸­é‡å¤å®šä¹‰ç›¸åŒçš„ç±»å‹
- âŒ ä¸è¦åœ¨æ¨¡å—å†…éƒ¨é‡æ–°å®šä¹‰å·²å­˜åœ¨çš„ç±»å‹ï¼ˆå¦‚ Resultã€Optionï¼‰

#### æ­£ç¡®åšæ³•
- âœ… åœ¨ `result.zig` ä¸­å®šä¹‰ `Result` ç±»å‹ï¼Œå¹¶åœ¨å…¶ä»–åœ°æ–¹é€šè¿‡å¯¼å…¥ä½¿ç”¨
- âœ… åœ¨ `option.zig` ä¸­å®šä¹‰ `Option` ç±»å‹ï¼Œå¹¶åœ¨å…¶ä»–åœ°æ–¹é€šè¿‡å¯¼å…¥ä½¿ç”¨
- âœ… åœ¨ `root.zig` ä¸­ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰åŸºç¡€ç±»å‹

#### ç±»å‹å¼•ç”¨ç¤ºä¾‹
```zig
// âœ… æ­£ç¡® - é€šè¿‡å¯¼å…¥ä½¿ç”¨ç»Ÿä¸€å®šä¹‰çš„ç±»å‹
const Result = @import("result.zig").Result;
const Option = @import("option.zig").Option;

// âœ… æ­£ç¡® - ä» root.zig å¯¼å…¥
const { Result, Option } = @import("root.zig");

// âŒ é”™è¯¯ - é‡å¤å®šä¹‰
pub fn Result(comptime T: type, comptime E: type) type {
    return union(enum) {
        ok: T,
        err: E,
    };
}
```

#### å®¡æŸ¥è¦ç‚¹
- æ£€æŸ¥æ‰€æœ‰ `.zig` æ–‡ä»¶ï¼Œç¡®ä¿æ²¡æœ‰é‡å¤çš„ç±»å‹å®šä¹‰
- éªŒè¯æ‰€æœ‰ç±»å‹éƒ½é€šè¿‡æ­£ç¡®çš„å¯¼å…¥è·¯å¾„å¼•ç”¨
- ç¡®ä¿ root.zig åŒ…å«æ‰€æœ‰å¿…è¦çš„ç±»å‹å¯¼å‡º

---

## Zig 0.15 API è¦æ±‚ï¼ˆå…³é”®ï¼‰

### ArrayListï¼ˆéœ€è¦ allocator å‚æ•°ï¼‰

```zig
// åˆå§‹åŒ– - å§‹ç»ˆä½¿ç”¨ initCapacity
var list = try std.ArrayList(T).initCapacity(allocator, 16);
defer list.deinit();

// âŒ é”™è¯¯ - Zig 0.15 çš„ append éœ€è¦ allocator
list.append(item);
try list.append(item);

// âœ… æ­£ç¡® - ä¼ å…¥ allocator å‚æ•°
try list.append(allocator, item);
try list.appendSlice(allocator, items);
const ptr = try list.addOne(allocator);
try list.ensureTotalCapacity(allocator, n);
const owned = try list.toOwnedSlice(allocator);

// AssumeCapacity ç³»åˆ—ä¸éœ€è¦ allocator
list.appendAssumeCapacity(item);
```

### ArrayList API é€ŸæŸ¥è¡¨ï¼ˆZig 0.15+ï¼‰

| æ–¹æ³• | éœ€è¦ allocator | è¯´æ˜ |
|------|---------------|------|
| `initCapacity(allocator, n)` | æ˜¯ | åˆå§‹åŒ–å¹¶é¢„åˆ†é…å®¹é‡ |
| `deinit()` | å¦ | é‡Šæ”¾å†…å­˜ |
| `append(allocator, item)` | æ˜¯ | æ·»åŠ å•ä¸ªå…ƒç´  |
| `appendSlice(allocator, items)` | æ˜¯ | æ·»åŠ å¤šä¸ªå…ƒç´  |
| `addOne(allocator)` | æ˜¯ | è·å–æ–°å…ƒç´ æŒ‡é’ˆ |
| `ensureTotalCapacity(allocator, n)` | æ˜¯ | ç¡®ä¿å®¹é‡ |
| `toOwnedSlice(allocator)` | æ˜¯ | è½¬æ¢ä¸ºæ‹¥æœ‰çš„åˆ‡ç‰‡ |
| `appendAssumeCapacity(item)` | å¦ | å‡è®¾å®¹é‡è¶³å¤Ÿ |
| `items` å­—æ®µ | å¦ | åªè¯»è®¿é—® |

### HashMap

```zig
// Managedï¼ˆStringHashMap, AutoHashMapï¼‰- å­˜å‚¨ allocator
var map = std.StringHashMap(V).init(allocator);
defer map.deinit();
try map.put(key, value);  // ä¸éœ€è¦ allocator

// Unmanagedï¼ˆStringHashMapUnmanagedï¼‰- éœ€è¦ allocator
var umap = std.StringHashMapUnmanaged(V){};
defer umap.deinit(allocator);
try umap.put(allocator, key, value);  // éœ€è¦ allocator

// ä½¿ç”¨ getOrPut é¿å…é‡å¤æŸ¥æ‰¾
const result = try map.getOrPut(key);
if (!result.found_existing) {
    result.value_ptr.* = new_value;
}
```

### HTTP Clientï¼ˆZig 0.15+ request/response APIï¼‰

**æ³¨æ„**: Zig 0.15 å®Œå…¨é‡æ„äº† HTTP Client APIï¼Œç§»é™¤äº† `fetch()` æ–¹æ³•ã€‚

```zig
var client: std.http.Client = .{ .allocator = allocator };
defer client.deinit();

// è§£æ URI
const uri = std.Uri.parse(url) catch return error.BadRequest;

// åˆ›å»ºè¯·æ±‚
var req = client.request(.GET, uri, .{
    .extra_headers = &.{
        .{ .name = "Accept", .value = "application/json" },
    },
}) catch return error.ConnectionFailed;
defer req.deinit();

// å‘é€ GET è¯·æ±‚ï¼ˆæ—  bodyï¼‰
req.sendBodiless() catch return error.ConnectionFailed;

// æˆ–å‘é€ POST è¯·æ±‚ï¼ˆå¸¦ bodyï¼‰
// req.transfer_encoding = .{ .content_length = body.len };
// var body_writer = req.sendBodyUnflushed(&.{}) catch return error.ConnectionFailed;
// body_writer.writer.writeAll(body) catch return error.ConnectionFailed;
// body_writer.end() catch return error.ConnectionFailed;
// if (req.connection) |conn| {
//     conn.flush() catch return error.ConnectionFailed;
// }

// æ¥æ”¶å“åº”å¤´
var response = req.receiveHead(&.{}) catch return error.ConnectionFailed;

// æ£€æŸ¥çŠ¶æ€ç 
if (response.head.status != .ok) {
    return error.HttpError;
}

// è¯»å–å“åº”ä½“
var reader = response.reader(&.{});
const body = reader.allocRemaining(allocator, std.Io.Limit.limited(10 * 1024 * 1024)) catch return error.ReadFailed;
defer allocator.free(body);
```

### std.json

```zig
// è§£æå¹¶é‡Šæ”¾
const parsed = try std.json.parseFromSlice(MyStruct, allocator, json_string, .{});
defer parsed.deinit();
const data = parsed.value;

// åºåˆ—åŒ–
const json_output = try std.json.stringifyAlloc(allocator, data, .{});
defer allocator.free(json_output);
```

### std.fmt

```zig
// åˆ†é…å¼æ ¼å¼åŒ–
const formatted = try std.fmt.allocPrint(allocator, "value: {d}", .{42});
defer allocator.free(formatted);

// éåˆ†é…å¼æ ¼å¼åŒ–ï¼ˆä½¿ç”¨ç¼“å†²åŒºï¼‰
var buffer: [256]u8 = undefined;
const result = try std.fmt.bufPrint(&buffer, "value: {d}", .{42});
```

### è‡ªå®šä¹‰ format å‡½æ•°ï¼ˆZig 0.15+ï¼‰

```zig
// âŒ æ—§ç‰ˆæœ¬
pub fn format(
    self: Self,
    comptime fmt: []const u8,
    options: std.fmt.FormatOptions,
    writer: anytype,
) !void {
    _ = fmt;
    _ = options;
    try writer.writeAll("...");
}
// ä½¿ç”¨: std.fmt.bufPrint(&buf, "{}", .{value});

// âœ… Zig 0.15+ (ä½¿ç”¨ {f} æ ¼å¼)
pub fn format(self: Self, writer: anytype) !void {
    _ = self;
    try writer.writeAll("...");
}
// ä½¿ç”¨: std.fmt.bufPrint(&buf, "{f}", .{value});
```

### ç±»å‹ä¿¡æ¯æšä¸¾ï¼ˆZig 0.15+ï¼‰

```zig
// âŒ æ—§ç‰ˆæœ¬
if (@typeInfo(T) == .Slice) { ... }
if (info.pointer.size == .Slice) { ... }

// âœ… Zig 0.15+
if (@typeInfo(T) == .slice) { ... }
if (info.pointer.size == .slice) { ... }
```

**å½±å“çš„æšä¸¾**:
- `.Slice` â†’ `.slice`
- `.Pointer` â†’ `.pointer`
- `.Struct` â†’ `.@"struct"`
- `.Enum` â†’ `.@"enum"`
- `.Union` â†’ `.@"union"`
- `.Array` â†’ `.array`
- `.Optional` â†’ `.optional`

### Ed25519 åŠ å¯† APIï¼ˆZig 0.15+ï¼‰

**æ³¨æ„**: Zig 0.15 å¯¹ Ed25519 API è¿›è¡Œäº†é‡å¤§é‡æ„ï¼Œå¯†é’¥ç±»å‹ç°åœ¨æ˜¯ç»“æ„ä½“è€ŒéåŸå§‹å­—èŠ‚æ•°ç»„ã€‚

#### ç±»å‹å˜æ›´

```zig
const Ed25519 = std.crypto.sign.Ed25519;

// âŒ æ—§ç‰ˆæœ¬ - SecretKey æ˜¯ [32]u8
const secret: [32]u8 = ...;
const kp = Ed25519.KeyPair.fromSecretKey(secret);

// âœ… Zig 0.15+ - SecretKey æ˜¯ç»“æ„ä½“ï¼ŒåŒ…å« 64 å­—èŠ‚ (seed + public_key)
const Ed25519 = std.crypto.sign.Ed25519;

// SecretKey ç»“æ„ä½“
pub const SecretKey = struct {
    bytes: [64]u8,  // å‰ 32 å­—èŠ‚æ˜¯ seedï¼Œå 32 å­—èŠ‚æ˜¯ public key
    
    pub fn seed(self: SecretKey) [32]u8;           // è·å– seed
    pub fn publicKeyBytes(self: SecretKey) [32]u8; // è·å–å…¬é’¥å­—èŠ‚
    pub fn fromBytes(bytes: [64]u8) !SecretKey;    // ä»å­—èŠ‚åˆ›å»º
    pub fn toBytes(self: SecretKey) [64]u8;        // è½¬æ¢ä¸ºå­—èŠ‚
};

// PublicKey ç»“æ„ä½“
pub const PublicKey = struct {
    bytes: [32]u8,
    
    pub fn fromBytes(bytes: [32]u8) !PublicKey;
    pub fn toBytes(self: PublicKey) [32]u8;
};
```

#### KeyPair ä½¿ç”¨æ–¹å¼

```zig
const Ed25519 = std.crypto.sign.Ed25519;

// âœ… ç”Ÿæˆéšæœºå¯†é’¥å¯¹
const kp = Ed25519.KeyPair.generate();

// âœ… ä» 32 å­—èŠ‚ seed ç¡®å®šæ€§ç”Ÿæˆ
const seed: [32]u8 = ...;
const kp = try Ed25519.KeyPair.generateDeterministic(seed);

// âœ… ä» SecretKey ç»“æ„ä½“åˆ›å»º
var secret_bytes: [64]u8 = ...;
const secret_key = try Ed25519.SecretKey.fromBytes(secret_bytes);
const kp = try Ed25519.KeyPair.fromSecretKey(secret_key);

// âœ… è·å–å…¬é’¥å­—èŠ‚
const pubkey_bytes: [32]u8 = kp.public_key.toBytes();

// âœ… è·å– seedï¼ˆç”¨äºé‡å»ºå¯†é’¥å¯¹ï¼‰
const seed: [32]u8 = kp.secret_key.seed();

// âœ… è·å–å®Œæ•´å¯†é’¥å­—èŠ‚ï¼ˆ64 å­—èŠ‚ï¼‰
const full_bytes: [64]u8 = kp.secret_key.toBytes();
```

#### Signature ä½¿ç”¨æ–¹å¼

```zig
const Ed25519 = std.crypto.sign.Ed25519;

// âŒ æ—§ç‰ˆæœ¬ - fromBytes è¿”å› error union
const sig = try Ed25519.Signature.fromBytes(bytes);

// âœ… Zig 0.15+ - fromBytes ä¸è¿”å› error union
const sig = Ed25519.Signature.fromBytes(bytes);

// âœ… ç­¾åæ¶ˆæ¯
const signature = try kp.sign(message, null);  // null = ç¡®å®šæ€§ç­¾å
const sig_bytes: [64]u8 = signature.toBytes();

// âœ… éªŒè¯ç­¾å
try sig.verify(message, kp.public_key);
```

#### å¸¸è§è¿ç§»é”™è¯¯

| é”™è¯¯æ¶ˆæ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|------|---------|
| `expected type 'SecretKey', found '[32]u8'` | SecretKey ç°åœ¨æ˜¯ç»“æ„ä½“ | ä½¿ç”¨ `generateDeterministic(seed)` æˆ– `SecretKey.fromBytes()` |
| `expected error union type, found 'Signature'` | `Signature.fromBytes` ä¸å†è¿”å›é”™è¯¯ | ç§»é™¤ `try` |
| `type 'PublicKey' is not indexable` | PublicKey æ˜¯ç»“æ„ä½“ | ä½¿ç”¨ `.toBytes()` è·å–å­—èŠ‚ |
| `no member named 'secret_key' in struct` | å­—æ®µè®¿é—®æ–¹å¼å˜æ›´ | æ£€æŸ¥ KeyPair ç»“æ„ä½“å®šä¹‰ |

#### Keypair æ¨¡å—å®ç°ç¤ºä¾‹

```zig
//! keypair.zig - Ed25519 å¯†é’¥å¯¹ç®¡ç†

const std = @import("std");
const Ed25519 = std.crypto.sign.Ed25519;

pub const Keypair = struct {
    inner: Ed25519.KeyPair,
    
    /// ç”Ÿæˆéšæœºå¯†é’¥å¯¹
    pub fn generate() Keypair {
        return .{ .inner = Ed25519.KeyPair.generate() };
    }
    
    /// ä» 32 å­—èŠ‚ seed åˆ›å»º
    pub fn fromSeed(seed: [32]u8) !Keypair {
        const kp = Ed25519.KeyPair.generateDeterministic(seed) catch {
            return error.InvalidSeed;
        };
        return .{ .inner = kp };
    }
    
    /// ä» 64 å­—èŠ‚åˆ›å»º (seed + public_key æ ¼å¼)
    pub fn fromBytes(bytes: []const u8) !Keypair {
        if (bytes.len != 64) return error.InvalidLength;
        
        var secret_bytes: [64]u8 = undefined;
        @memcpy(&secret_bytes, bytes);
        
        const secret_key = Ed25519.SecretKey.fromBytes(secret_bytes) catch {
            return error.InvalidSecretKey;
        };
        const kp = Ed25519.KeyPair.fromSecretKey(secret_key) catch {
            return error.PublicKeyMismatch;
        };
        return .{ .inner = kp };
    }
    
    /// è·å– 64 å­—èŠ‚è¡¨ç¤º
    pub fn toBytes(self: Keypair) [64]u8 {
        return self.inner.secret_key.toBytes();
    }
    
    /// è·å– 32 å­—èŠ‚ seed
    pub fn seed(self: Keypair) [32]u8 {
        return self.inner.secret_key.seed();
    }
    
    /// è·å–å…¬é’¥å­—èŠ‚
    pub fn pubkeyBytes(self: Keypair) [32]u8 {
        return self.inner.public_key.toBytes();
    }
    
    /// ç­¾åæ¶ˆæ¯
    pub fn sign(self: Keypair, message: []const u8) ![64]u8 {
        const sig = try self.inner.sign(message, null);
        return sig.toBytes();
    }
};
```

---

## å†…å­˜ç®¡ç†

### èµ„æºæ¸…ç†

```zig
// å§‹ç»ˆä½¿ç”¨ defer æ¸…ç†
const buffer = try allocator.alloc(u8, size);
defer allocator.free(buffer);

// ä½¿ç”¨ errdefer å¤„ç†é”™è¯¯è·¯å¾„æ¸…ç†
fn createResource(allocator: Allocator) !*Resource {
    const res = try allocator.create(Resource);
    errdefer allocator.destroy(res);

    res.data = try allocator.alloc(u8, 100);
    errdefer allocator.free(res.data);

    try res.initialize();
    return res;
}
```

### Arena Allocator ç”¨äºä¸´æ—¶åˆ†é…

```zig
var arena = std.heap.ArenaAllocator.init(allocator);
defer arena.deinit();
const temp = arena.allocator();
// arena.deinit() ä¼šä¸€æ¬¡æ€§é‡Šæ”¾æ‰€æœ‰åˆ†é…
```

### å­—ç¬¦ä¸²æ‰€æœ‰æƒ

```zig
// å€Ÿç”¨ - ä¸è¦é‡Šæ”¾
fn process(borrowed: []const u8) void {
    // åªè¯»ï¼Œä¸èƒ½é‡Šæ”¾
}

// æ‹¥æœ‰ - è°ƒç”¨è€…å¿…é¡»é‡Šæ”¾
fn createString(allocator: std.mem.Allocator) ![]u8 {
    return try allocator.dupe(u8, "owned string");
}

const owned = try createString(allocator);
defer allocator.free(owned);
```

---

## é”™è¯¯å¤„ç†

```zig
// âŒ é”™è¯¯ - é™é»˜å¿½ç•¥é”™è¯¯
const result = doSomething() catch null;

// âœ… æ­£ç¡® - ä¼ æ’­é”™è¯¯
const result = try doSomething();

// âœ… æ­£ç¡® - æœ‰æ„ä¹‰çš„é”™è¯¯å¤„ç†
const result = doSomething() catch |err| {
    std.log.err("Failed: {}", .{err});
    return err;
};
```

---

## é¡¹ç›®ç‰¹å®šè§„åˆ™ï¼ˆå¯é€‰é…ç½®ï¼‰

### æ•æ„Ÿæ•°æ®å¤„ç†

```zig
// âŒ é”™è¯¯ - åŸå§‹æ•æ„Ÿæ•°æ®
const Credentials = struct {
    secret: []const u8,      // å¯èƒ½è¢«æ„å¤–æ‰“å°
};

// âœ… æ­£ç¡® - ä½¿ç”¨ Secret åŒ…è£…
const Credentials = struct {
    secret: Secret([]const u8),
    passphrase: Secret([]const u8),
};

// Secret.format() è¾“å‡º "[REDACTED]"
```

### ç²¾ç¡®è®¡ç®—ï¼ˆé‡‘èé¡¹ç›®ï¼‰

```zig
// âŒ æ°¸è¿œä¸è¦ç”¨ f64 å¤„ç†é‡‘é’±
const price: f64 = 0.65;
const total = price * 100.0;  // å¯èƒ½æ˜¯ 64.99999999...

// âœ… æ­£ç¡® - ä½¿ç”¨ Decimal
const price = try Decimal.fromString("0.65");
const size = try Decimal.fromString("100");
const total = price.mul(size);  // ç²¾ç¡®çš„ 65.00
```

### æ—¥å¿—è§„èŒƒ

```zig
// âŒ é”™è¯¯ - æ³„éœ²æ•æ„Ÿä¿¡æ¯
std.log.info("API Key: {s}", .{credentials.key});

// âœ… æ­£ç¡® - å®‰å…¨æ—¥å¿—
std.log.info("Request to {s}", .{endpoint});
std.log.debug("Order ID: {s}", .{order_id});
```

### ç¦æ­¢ async/await

Zig 0.11+ ç§»é™¤äº†åŸç”Ÿ async/awaitã€‚ä½¿ç”¨åŒæ­¥ä»£ç æˆ–çº¿ç¨‹ï¼š

```zig
// åŒæ­¥ï¼ˆæ¨èï¼‰
const result = try fetchData();

// å¹¶å‘æ“ä½œä½¿ç”¨çº¿ç¨‹
const thread = try std.Thread.spawn(.{}, workerFn, .{});
```

---

## æäº¤å‰æ£€æŸ¥æ¸…å•

### Zig 0.15 API
- [ ] `ArrayList` ä½¿ç”¨ `initCapacity` å¹¶å‘å˜æ›´æ–¹æ³•ä¼ å…¥ `allocator`
- [ ] `toOwnedSlice` ä¼ å…¥ `allocator` å‚æ•°
- [ ] åŒºåˆ† Managedï¼ˆ`StringHashMap`ï¼‰å’Œ Unmanagedï¼ˆ`StringHashMapUnmanaged`ï¼‰
- [ ] HTTP è¯·æ±‚ä½¿ç”¨ Zig 0.15 çš„ `request/response` APIï¼ˆé fetchï¼‰
- [ ] è‡ªå®šä¹‰ format å‡½æ•°ä½¿ç”¨ `{f}` æ ¼å¼è¯´æ˜ç¬¦
- [ ] @typeInfo æšä¸¾ä½¿ç”¨å°å†™ï¼ˆå¦‚ `.slice` è€Œé `.Slice`ï¼‰

### å†…å­˜å®‰å…¨
- [ ] æ‰€æœ‰åˆ†é…éƒ½æœ‰å¯¹åº”çš„ `defer`/`errdefer`
- [ ] ä½¿ç”¨ `errdefer` å¤„ç†é”™è¯¯è·¯å¾„æ¸…ç†
- [ ] æ²¡æœ‰ä½¿ç”¨ `async`/`await`ï¼ˆZig 0.11+ å·²ç§»é™¤ï¼‰

### é¡¹ç›®è§„åˆ™
- [ ] æ•æ„Ÿæ•°æ®ä½¿ç”¨åŒ…è£…ç±»å‹ï¼ˆå¦‚é…ç½®ï¼‰
- [ ] é‡‘èè®¡ç®—ä½¿ç”¨ç²¾ç¡®ç±»å‹ï¼ˆå¦‚é…ç½®ï¼‰
- [ ] æ—¥å¿—ä¸åŒ…å«æ•æ„Ÿä¿¡æ¯
- [ ] å…¬å…± API æœ‰æ–‡æ¡£æ³¨é‡Š
- [ ] **å¼ºåˆ¶**: æ¯ä¸ª `.zig` æ–‡ä»¶é¡¶éƒ¨æœ‰ Rust æºå¼•ç”¨æ³¨é‡Šï¼ˆè§é‡å†™é¡¹ç›®æºå¼•ç”¨è§„èŒƒï¼‰
- [ ] **å¼ºåˆ¶**: æµ‹è¯•å¿…é¡»å®Œå…¨é€šè¿‡ï¼š`zig build test` (è§å¼ºåˆ¶è§„åˆ™)

### æ–‡æ¡£è§„èŒƒ
- [ ] ç›¸å…³æ–‡æ¡£å·²åŒæ­¥æ›´æ–°
- [ ] ROADMAP.md çŠ¶æ€æ­£ç¡®
- [ ] Story æ–‡ä»¶å·²æ›´æ–°ï¼ˆæ‰€æœ‰ `[ ]` æ”¹ä¸º `[x]`ï¼‰
- [ ] Story å®ŒæˆçŠ¶æ€å·²æ›´æ–°ï¼ˆâ³ â†’ âœ…ï¼‰
- [ ] README.md å·²æ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] CHANGELOG.md å·²æ›´æ–°

### Story åŒæ­¥æ£€æŸ¥
- [ ] `grep -rn "\[ \]" stories/` æ— è¾“å‡ºï¼ˆæ‰€æœ‰ä»»åŠ¡å®Œæˆï¼‰
- [ ] Story çŠ¶æ€ä¸ ROADMAP ä¸€è‡´

---

## Zig ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜é€ŸæŸ¥

### å¸¸è§è¿ç§»é”™è¯¯æ¶ˆæ¯

| é”™è¯¯æ¶ˆæ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|------|---------|
| `expected 2 argument(s), found 1` | ArrayList.append éœ€è¦ allocator | æ·»åŠ  allocator å‚æ•° |
| `ambiguous format string` | è‡ªå®šä¹‰ format éœ€è¦ `{f}` | ä½¿ç”¨ `{f}` è€Œé `{}` |
| `no field named 'response_storage'` | fetch API å·²ç§»é™¤ | ä½¿ç”¨ request/response æ¨¡å¼ |
| `member access not allowed on type` | æšä¸¾å¤§å°å†™å˜æ›´ | ä½¿ç”¨å°å†™æšä¸¾å€¼ |
| `expected type 'i2'` | compare è¿”å›ç±»å‹ | è¿”å› -1, 0, 1 è€Œéæšä¸¾ |
| `expected type 'SecretKey', found '[32]u8'` | Ed25519 SecretKey æ˜¯ç»“æ„ä½“ | ä½¿ç”¨ `generateDeterministic()` |
| `expected error union type, found 'Signature'` | Signature.fromBytes ä¸è¿”å›é”™è¯¯ | ç§»é™¤ `try` |
| `type 'PublicKey' is not indexable` | Ed25519 PublicKey æ˜¯ç»“æ„ä½“ | ä½¿ç”¨ `.toBytes()` |

### è¿ç§»æ£€æŸ¥æ¸…å•

- [ ] ArrayList æ–¹æ³•æ·»åŠ  allocator å‚æ•°
- [ ] HTTP è¯·æ±‚æ”¹ç”¨ request/response æ¨¡å¼
- [ ] è‡ªå®šä¹‰ format ä½¿ç”¨ `{f}` æ ¼å¼
- [ ] @typeInfo æšä¸¾ä½¿ç”¨å°å†™
- [ ] æ£€æŸ¥ compare å‡½æ•°è¿”å› i2
- [ ] æµ‹è¯•æ‰€æœ‰ç½‘ç»œé”™è¯¯å¤„ç†
- [ ] Ed25519 å¯†é’¥ä½¿ç”¨ç»“æ„ä½“è€ŒéåŸå§‹å­—èŠ‚
- [ ] Signature.fromBytes ç§»é™¤ `try`

---

## Roc on Solana é¡¹ç›®è§„èŒƒ

**é¡¹ç›®æ¦‚è¿°**: æœ¬é¡¹ç›®æ—¨åœ¨ä½¿ç”¨ Roc å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å®ç° Solana æ™ºèƒ½åˆçº¦ï¼Œé€šè¿‡ Zig èƒ¶æ°´ä»£ç æ¡¥æ¥ Roc å’Œ Solana è¿è¡Œæ—¶ã€‚

### é¡¹ç›®é…ç½®

```yaml
# é¡¹ç›®åŸºæœ¬ä¿¡æ¯
project_name: "Roc on Solana Platform"
description: "ä½¿ç”¨ Roc è¯­è¨€åœ¨ Solana ä¸Šç¼–å†™æ™ºèƒ½åˆçº¦çš„å¹³å°"

# æ–‡æ¡£è¯­è¨€
doc_language: "ä¸­æ–‡"

# é¡¹ç›®ç»“æ„
src_dir: "src/"
platform_dir: "platform/"
docs_dir: "docs/"
examples_dir: "examples/"
stories_dir: "stories/"

# Roc on Solana ç‰¹å®šè§„åˆ™
roc_compiler_min_version: "0.0.0"  # å½“å‰å¼€å‘ç‰ˆ
zig_sdk_dependency: "solana-program-sdk-zig"
llvm_backend_required: true
perceus_algorithm_enabled: true  # Roc çš„å¼•ç”¨è®¡æ•°ç®—æ³•
```

### ğŸš¨ å·¥å…·é“¾è§„èŒƒï¼ˆå¼ºåˆ¶ï¼‰

**æ ¸å¿ƒåŸåˆ™**: æœ¬é¡¹ç›®ä½¿ç”¨è‡ªå®šä¹‰çš„ solana-zig-bootstrap å·¥å…·é“¾ï¼Œ**ç¦æ­¢ä½¿ç”¨ç³»ç»Ÿ zig**ï¼

#### Zig ç¼–è¯‘å™¨è¦æ±‚

| é¡¹ç›® | è¦æ±‚ |
|------|------|
| **ç¼–è¯‘å™¨è·¯å¾„** | `./solana-zig/zig` |
| **ç‰ˆæœ¬** | 0.15.2 (solana-zig-bootstrap) |
| **æ¥æº** | https://github.com/joncinque/solana-zig-bootstrap |
| **ç³»ç»Ÿ zig** | âŒ **ç¦æ­¢ä½¿ç”¨** |

**ä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨ solana-zigï¼Ÿ**

æ ‡å‡† Zig ç¼–è¯‘å™¨**ä¸æ”¯æŒ** Solana çš„ SBF (Solana BPF) ç›®æ ‡æ¶æ„ï¼š
- æ ‡å‡† Zig æ²¡æœ‰ `sbf` CPU æ¶æ„
- æ ‡å‡† Zig æ²¡æœ‰ `solana` æ“ä½œç³»ç»Ÿç›®æ ‡
- ä½¿ç”¨ç³»ç»Ÿ zig ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼š`enum 'Target.Cpu.Arch' has no member named 'sbf'`

solana-zig-bootstrap æ˜¯ä¿®æ”¹ç‰ˆçš„ Zigï¼Œæ·»åŠ äº†ï¼š
- `sbf` CPU æ¶æ„æ”¯æŒ
- `solana` æ“ä½œç³»ç»Ÿç›®æ ‡
- åŸç”Ÿ SBF é“¾æ¥å™¨æ”¯æŒï¼ˆæ— éœ€ sbpf-linkerï¼‰

#### æ­£ç¡®çš„æ„å»ºå‘½ä»¤

```bash
# âœ… æ­£ç¡® - ä½¿ç”¨ solana-zig
./solana-zig/zig build              # æ„å»º Solana ç¨‹åº
./solana-zig/zig build test         # è¿è¡Œæµ‹è¯•
./solana-zig/zig build solana       # æ„å»º Solana ç¨‹åº

# âŒ é”™è¯¯ - ç¦æ­¢ä½¿ç”¨ç³»ç»Ÿ zig
zig build                           # ä¼šå¤±è´¥ï¼
zig build test                      # ä¼šå¤±è´¥ï¼
```

#### Roc ç¼–è¯‘å™¨è¦æ±‚

| é¡¹ç›® | è¦æ±‚ |
|------|------|
| **æºç ä½ç½®** | `./roc-source/` |
| **ç¼–è¯‘å·¥å…·** | å¿…é¡»ä½¿ç”¨ `./solana-zig/zig` ç¼–è¯‘ |
| **æ ‡å‡† Roc** | âŒ **ç¦æ­¢ä½¿ç”¨**ï¼ˆä¸æ”¯æŒ SBF ç›®æ ‡ï¼‰ |

**ä¸ºä»€ä¹ˆ Roc ä¹Ÿéœ€è¦ç”¨ solana-zig ç¼–è¯‘ï¼Ÿ**

Roc ç¼–è¯‘å™¨ä½¿ç”¨ Zig ä½œä¸ºå…¶åç«¯ã€‚ä¸ºäº†ç”Ÿæˆ Solana å…¼å®¹çš„ä»£ç ï¼š
1. Roc å¿…é¡»ä½¿ç”¨æ”¯æŒ SBF ç›®æ ‡çš„ Zig ç¼–è¯‘
2. è¿™ç¡®ä¿ Roc çš„ LLVM åç«¯èƒ½ç”Ÿæˆ SBF å…¼å®¹çš„ IR
3. æ ‡å‡† Roc æ— æ³•ç”Ÿæˆ Solana ç¨‹åº

**ç¼–è¯‘ Roc çš„æ­£ç¡®æ–¹å¼ï¼š**

```bash
cd roc-source
../solana-zig/zig build -Drelease

# éªŒè¯
./zig-out/bin/roc version
```

#### å·¥å…·é“¾æ£€æŸ¥æ¸…å•

åœ¨å¼€å§‹ä»»ä½•å¼€å‘å·¥ä½œå‰ï¼Œå¿…é¡»éªŒè¯ï¼š

- [ ] `./solana-zig/zig version` è¾“å‡º `0.15.2`
- [ ] `./solana-zig/zig targets | grep sbf` æ˜¾ç¤º sbf æ”¯æŒ
- [ ] `./solana-zig/zig build test` æµ‹è¯•é€šè¿‡
- [ ] `./solana-zig/zig build` ç”Ÿæˆ `zig-out/lib/roc-hello.so`

#### ç¦æ­¢è¡Œä¸º

- âŒ **ç¦æ­¢**: ä½¿ç”¨ç³»ç»Ÿ `zig` å‘½ä»¤
- âŒ **ç¦æ­¢**: ä½¿ç”¨æ ‡å‡†ä¸‹è½½çš„ Roc ç¼–è¯‘å™¨
- âŒ **ç¦æ­¢**: ä¿®æ”¹ build.zig ä½¿å…¶ä¸ç³»ç»Ÿ zig å…¼å®¹
- âŒ **ç¦æ­¢**: åœ¨æ–‡æ¡£ä¸­å†™ `zig build` è€Œä¸æ˜¯ `./solana-zig/zig build`
- âŒ **ç¦æ­¢**: ä½¿ç”¨ `sbpf-linker` è¿›è¡Œé“¾æ¥ï¼ˆsolana-zig åŸç”Ÿæ”¯æŒ SBF é“¾æ¥ï¼Œæ— éœ€å¤–éƒ¨å·¥å…·ï¼‰

#### æ­£ç¡®çš„ç¼–è¯‘æµç¨‹

**å¼ºåˆ¶è¦æ±‚**: ä½¿ç”¨ solana-zig åŸç”Ÿ SBF é“¾æ¥ï¼Œä¸ä¾èµ– sbpf-linkerï¼š

```bash
# âœ… æ­£ç¡® - ä½¿ç”¨ solana-zig åŸç”Ÿ SBF æ”¯æŒ
./solana-zig/zig build                    # ç›´æ¥ç”Ÿæˆ .so æ–‡ä»¶

# âŒ é”™è¯¯ - ç¦æ­¢ä½¿ç”¨ sbpf-linker
zig build-lib -femit-llvm-bc ...          # ç”Ÿæˆ bitcode
sbpf-linker ... -o program.so             # ç¦æ­¢ï¼
```

**ä¸ºä»€ä¹ˆç¦æ­¢ sbpf-linkerï¼Ÿ**
- solana-zig åŸç”Ÿæ”¯æŒ `sbf-solana` ç›®æ ‡ï¼Œå¯ç›´æ¥ç”Ÿæˆ SBF å¯æ‰§è¡Œæ–‡ä»¶
- sbpf-linker éœ€è¦é¢å¤–çš„ LLVM å…±äº«åº“ä¾èµ–ï¼Œå¢åŠ ç¯å¢ƒå¤æ‚åº¦
- ä½¿ç”¨åŸç”Ÿå·¥å…·é“¾æ›´ç®€æ´ã€æ›´å¯é 

#### é”™è¯¯å¤„ç†

å¦‚æœçœ‹åˆ°ä»¥ä¸‹é”™è¯¯ï¼Œè¯´æ˜ä½¿ç”¨äº†é”™è¯¯çš„å·¥å…·é“¾ï¼š

| é”™è¯¯æ¶ˆæ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|------|---------|
| `enum 'Target.Cpu.Arch' has no member named 'sbf'` | ä½¿ç”¨äº†ç³»ç»Ÿ zig | æ”¹ç”¨ `./solana-zig/zig` |
| `no field named 'addSharedLibrary'` | solana-zig API ä¸åŒ | ä½¿ç”¨ `addLibrary` + `linkage = .dynamic` |
| `Roc: unsupported target` | ä½¿ç”¨äº†æ ‡å‡† Roc | ç”¨ solana-zig é‡æ–°ç¼–è¯‘ Roc |

### Roc å¹³å°æ¶æ„è§„èŒƒ

#### ä¸‰å±‚æ¶æ„è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: é¡¹ç›®å¿…é¡»éµå¾ªä¸‰å±‚æ¶æ„æ¨¡å¼ï¼š

1. **Roc å¹³å°å±‚** (`platform/`): çº¯å‡½æ•°å¼æ¥å£ï¼Œå®šä¹‰ç±»å‹å’Œæ•ˆæœ
2. **Zig èƒ¶æ°´å±‚** (`src/`): æ•°æ®è½¬æ¢å’Œç³»ç»Ÿè°ƒç”¨æ¡¥æ¥
3. **Zig SDK å±‚** (`vendor/solana-program-sdk-zig/`): åº•å±‚ Solana åŠŸèƒ½

#### å±‚é—´é€šä¿¡è§„èŒƒ

**æ•°æ®æ ¼å¼è¦æ±‚**:
- Roc ç±»å‹å¿…é¡»ä¸ Zig ç±»å‹å†…å­˜å¸ƒå±€å…¼å®¹
- ä½¿ç”¨æ˜¾å¼è½¬æ¢å‡½æ•°å¤„ç† ABI è¾¹ç•Œ
- ç¦æ­¢åœ¨å±‚é—´ç›´æ¥ä¼ é€’å¤æ‚ç»“æ„ä½“

**æ•ˆæœå¤„ç†è¦æ±‚**:
- Roc æ•ˆæœå¿…é¡»æ˜ å°„åˆ°å…·ä½“çš„ Zig SDK è°ƒç”¨
- æ¯ä¸ªæ•ˆæœå¿…é¡»æœ‰å¯¹åº”çš„é”™è¯¯å¤„ç†
- ç¦æ­¢é™é»˜å¿½ç•¥æ•ˆæœå¤±è´¥

### Roc è¯­è¨€è§„èŒƒ

#### ä»£ç é£æ ¼è¦æ±‚

```elm
-- å¼ºåˆ¶ï¼šä½¿ç”¨ç±»å‹é©±åŠ¨å¼€å‘
app "contract" {
    -- æ˜ç¡®ç±»å‹å£°æ˜
    main : Context -> Result {} [Error Str]
    main = \ctx -> ...

    -- çº¯å‡½æ•°ä¼˜å…ˆ
    validateAccount : Account -> Result Account [InvalidAccount]
    validateAccount = \account ->
        if account.is_signer then
            Ok account
        else
            Err InvalidAccount
}

-- å¼ºåˆ¶ï¼šç®¡é“æ“ä½œç¬¦ç”¨äºå¯è¯»æ€§
transferTokens : Account -> Account -> U64 -> Result {} [TransferError]
transferTokens = \from to amount ->
    validateBalance from amount
    |> andThen (\_ -> checkPermissions from)
    |> andThen (\_ -> executeTransfer from to amount)
```

#### ç±»å‹å®šä¹‰è§„èŒƒ

**å¼ºåˆ¶è¦æ±‚**: æ‰€æœ‰ Solana æ•°æ®ç»“æ„å¿…é¡»åœ¨ Roc ä¸­ç²¾ç¡®é•œåƒï¼š

```elm
-- ç²¾ç¡®åŒ¹é… Solana æ•°æ®ç»“æ„
Pubkey : [ Pubkey (List U8) ] -- 32 å­—èŠ‚

Account : {
    key : Pubkey,
    lamports : U64,
    data : List U8,
    owner : Pubkey,
    isSigner : Bool,
    isWritable : Bool,
}

Context : {
    programId : Pubkey,
    accounts : List Account,
    instructionData : List U8,
}
```

### Zig èƒ¶æ°´ä»£ç è§„èŒƒ

#### å†…å­˜ç®¡ç†è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: å®ç° Roc åˆ†é…å™¨æ¥å£ï¼š

```zig
// å¿…é¡»å®ç°çš„å‡½æ•°
export fn roc_alloc(size: usize, alignment: u32) ?[*]u8;
export fn roc_realloc(ptr: [*]u8, new_size: usize, old_size: usize, alignment: u32) ?[*]u8;
export fn roc_dealloc(ptr: [*]u8, alignment: u32) void;

// ä½¿ç”¨ Solana å…¼å®¹çš„ Bump åˆ†é…å™¨
var heap_pos: usize = 0;
const HEAP_SIZE: usize = 32 * 1024; // Solana å †é™åˆ¶
```

#### æ•ˆæœå¤„ç†å™¨è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: ä¸ºæ¯ä¸ª Roc æ•ˆæœæä¾›å¤„ç†å™¨ï¼š

```zig
// å¯¼å‡ºç»™ Roc çš„å‡½æ•°å‘½åçº¦å®š: roc_fx_[effect_name]
export fn roc_fx_log(msg: RocStr) void {
    const slice = msg.asSlice();
    solana.log(slice);
}

export fn roc_fx_transfer(from: *RocPubkey, to: *RocPubkey, amount: u64) void {
    // è½¬æ¢ç±»å‹
    const zig_from = rocPubkeyToZig(from);
    const zig_to = rocPubkeyToZig(to);

    // è°ƒç”¨ SDK
    const instruction = solana.systemProgram.transfer(zig_from, zig_to, amount);
    solana.invokeInstruction(&instruction);
}
```

### æ„å»ºå’Œéƒ¨ç½²è§„èŒƒ

#### ç¼–è¯‘æµç¨‹è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: æ„å»ºè¿‡ç¨‹å¿…é¡»æŒ‰åºæ‰§è¡Œï¼š

1. **Roc ç¼–è¯‘**: ç”Ÿæˆ LLVM ä½ç 
   ```bash
   roc build --emit-llvm-bc app.roc -o app.bc
   ```

2. **Zig ç¼–è¯‘**: é“¾æ¥èƒ¶æ°´ä»£ç 
   ```zig
   // build.zig - å¿…é¡»åŒ…å« Roc å¯¹è±¡
   const roc_app = b.addObjectFile(.{ .path = "app.bc" });
   lib.addObject(roc_app);
   ```

3. **ç›®æ ‡ç”Ÿæˆ**: äº§ç”Ÿ BPF å…±äº«åº“
   ```bash
   zig build -Doptimize=ReleaseSmall  # æœ€å°åŒ–å¤§å°
   ```

#### éƒ¨ç½²éªŒè¯è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: éƒ¨ç½²å‰å¿…é¡»éªŒè¯ï¼š

- [ ] BPF å­—èŠ‚ç æœ‰æ•ˆ
- [ ] é‡å®šä½æ­£ç¡®
- [ ] å†…å­˜ä½¿ç”¨åœ¨ Solana é™åˆ¶å†… (32KB å †)
- [ ] è®¡ç®—å•å…ƒæ¶ˆè€—å¯æ¥å—

### æµ‹è¯•è§„èŒƒ

#### æµ‹è¯•åˆ†å±‚è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: å®ç°å®Œæ•´æµ‹è¯•è¦†ç›–ï¼š

```zig
// 1. Zig èƒ¶æ°´å±‚æµ‹è¯•
test "allocator works" {
    const ptr = roc_alloc(100, 8);
    try std.testing.expect(ptr != null);
}

// 2. Roc å¹³å°æµ‹è¯•
test "validate account logic" {
    const account = Account{...};
    const result = validateAccount(account);
    try std.testing.expect(result == Ok(account));
}

// 3. é›†æˆæµ‹è¯•
test "full contract execution" {
    const mock_context = createMockContext();
    const result = roc_mainForHost(mock_context);
    try std.testing.expect(result.is_ok);
}
```

#### æ€§èƒ½æµ‹è¯•è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: æµ‹é‡å’ŒéªŒè¯æ€§èƒ½ï¼š

- [ ] è®¡ç®—å•å…ƒä½¿ç”¨é‡
- [ ] å †å†…å­˜ä½¿ç”¨é‡
- [ ] æ ˆæ·±åº¦é™åˆ¶ (4KB Solana é™åˆ¶)
- [ ] å¯¹æ¯”ç­‰æ•ˆ Rust/Anchor å®ç°

### æ–‡æ¡£è§„èŒƒ

#### ä¸­æ–‡æ–‡æ¡£è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: æ‰€æœ‰æ–‡æ¡£ä½¿ç”¨ä¸­æ–‡ç¼–å†™ï¼š

- [ ] README.md - å®Œæ•´ä¸­æ–‡ç”¨æˆ·æŒ‡å—
- [ ] docs/architecture.md - æ¶æ„è¯¦ç»†è¯´æ˜
- [ ] docs/build-integration.md - æ„å»ºè¿‡ç¨‹æ–‡æ¡£
- [ ] docs/challenges-solutions.md - æŒ‘æˆ˜å’Œè§£å†³æ–¹æ¡ˆ
- [ ] æ‰€æœ‰ä»£ç æ³¨é‡Šå’Œæ–‡æ¡£å­—ç¬¦ä¸²

#### Story æ–‡ä»¶è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: ä½¿ç”¨ä¸­æ–‡ç¼–å†™ Story æ–‡ä»¶ï¼š

```markdown
# Story: v0.1.0 æ ¸å¿ƒå¹³å°å®ç°

> å®ç° Roc on Solana çš„åŸºæœ¬å¹³å°æ¶æ„

## ç›®æ ‡

- [ ] å®ç° Roc åˆ†é…å™¨æ¥å£
- [ ] å®šä¹‰åŸºç¡€ Solana ç±»å‹ (Pubkey, Account, Context)
- [ ] åˆ›å»ºåŸºæœ¬çš„æ—¥å¿—æ•ˆæœ
- [ ] é€šè¿‡ç®€å•ç¤ºä¾‹éªŒè¯æ¶æ„

## éªŒæ”¶æ ‡å‡†

### platform/main.roc
- [ ] å®šä¹‰ Context å’Œ Account ç±»å‹
- [ ] å®ç° log æ•ˆæœå£°æ˜

### src/allocator.zig
- [ ] å®ç° roc_alloc/dealloc å‡½æ•°
- [ ] æ­£ç¡®å¤„ç† Solana å †é™åˆ¶

### æµ‹è¯•
- [ ] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] é›†æˆæµ‹è¯•é€šè¿‡

## å®ŒæˆçŠ¶æ€

- å¼€å§‹æ—¥æœŸ: YYYY-MM-DD
- å®Œæˆæ—¥æœŸ: YYYY-MM-DD
- çŠ¶æ€: â³ è¿›è¡Œä¸­
```

### å®‰å…¨è§„èŒƒ

#### æ™ºèƒ½åˆçº¦å®‰å…¨è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: å®æ–½å®‰å…¨æœ€ä½³å®è·µï¼š

- [ ] æ‰€æœ‰è¾“å…¥éªŒè¯
- [ ] è¾¹ç•Œæ£€æŸ¥é˜²æ­¢æº¢å‡º
- [ ] æƒé™æ£€æŸ¥é˜²æ­¢æœªæˆæƒè®¿é—®
- [ ] çŠ¶æ€ä¸€è‡´æ€§ä¿è¯

#### å†…å­˜å®‰å…¨è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: é˜²æ­¢å¸¸è§æ¼æ´ï¼š

- [ ] æ— ç¼“å†²åŒºæº¢å‡º
- [ ] æ— æ‚¬ç©ºæŒ‡é’ˆ
- [ ] æ— å†…å­˜æ³„æ¼
- [ ] æ— æ®µé”™è¯¯

### å…¼å®¹æ€§è§„èŒƒ

#### ç‰ˆæœ¬å…¼å®¹æ€§è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: ç»´æŠ¤ç‰ˆæœ¬å…¼å®¹æ€§ï¼š

- [ ] æŒ‡å®šæœ€å° Roc ç‰ˆæœ¬è¦æ±‚
- [ ] æŒ‡å®š Zig SDK ç‰ˆæœ¬èŒƒå›´
- [ ] å®šæœŸæµ‹è¯•æ–°ç‰ˆæœ¬å…¼å®¹æ€§
- [ ] æä¾›å‡çº§æŒ‡å—

#### å¹³å°å…¼å®¹æ€§è¦æ±‚

**å¼ºåˆ¶è¦æ±‚**: ç¡®ä¿è·¨å¹³å°å…¼å®¹ï¼š

- [ ] Linux å’Œ macOS å¼€å‘ç¯å¢ƒ
- [ ] Solana devnet/testnet/mainnet
- [ ] ä¸åŒ Solana CLI ç‰ˆæœ¬

### æ€§èƒ½ä¼˜åŒ–è§„èŒƒ

#### è®¡ç®—å•å…ƒä¼˜åŒ–

**å¼ºåˆ¶è¦æ±‚**: æœ€å°åŒ–é“¾ä¸Šè®¡ç®—æˆæœ¬ï¼š

- [ ] ä½¿ç”¨ Roc çš„ Perceus ç®—æ³•ä¼˜åŠ¿
- [ ] é¿å…ä¸å¿…è¦çš„åˆ†é…
- [ ] ä¼˜åŒ–çƒ­è·¯å¾„
- [ ] æ‰¹é‡æ“ä½œå‡å°‘è°ƒç”¨æ¬¡æ•°

#### å†…å­˜ä¼˜åŒ–

**å¼ºåˆ¶è¦æ±‚**: æ§åˆ¶å†…å­˜ä½¿ç”¨ï¼š

- [ ] ä¿æŒåœ¨ Solana 32KB å †é™åˆ¶å†…
- [ ] ä½¿ç”¨æ ˆåˆ†é…ä¼˜å…ˆ
- [ ] æœ€å°åŒ–æ•°æ®å¤åˆ¶
- [ ] åŠæ—¶é‡Šæ”¾ä¸´æ—¶èµ„æº

### æäº¤å‰æ£€æŸ¥æ¸…å•ï¼ˆRoc on Solana æ‰©å±•ï¼‰

#### Roc ç‰¹å®šæ£€æŸ¥
- [ ] æ‰€æœ‰ Roc ä»£ç é€šè¿‡ç±»å‹æ£€æŸ¥
- [ ] ä½¿ç”¨ç®¡é“æ“ä½œç¬¦æé«˜å¯è¯»æ€§
- [ ] çº¯å‡½æ•°ä¼˜å…ˆï¼Œé¿å…å‰¯ä½œç”¨
- [ ] ç±»å‹å®šä¹‰ä¸ Zig å¸ƒå±€å…¼å®¹

#### å¹³å°é›†æˆæ£€æŸ¥
- [ ] ABI è¾¹ç•Œæ­£ç¡®å¤„ç†
- [ ] æ•ˆæœå¤„ç†å™¨å®Œæ•´å®ç°
- [ ] å†…å­˜ç®¡ç†æ— æ³„æ¼
- [ ] é”™è¯¯ä¼ æ’­æ­£ç¡®

#### Solana å…¼å®¹æ€§æ£€æŸ¥
- [ ] BPF å­—èŠ‚ç ç”Ÿæˆæ­£ç¡®
- [ ] å †ä½¿ç”¨åœ¨ 32KB é™åˆ¶å†…
- [ ] è®¡ç®—å•å…ƒæ¶ˆè€—åˆç†
- [ ] éƒ¨ç½²åˆ° devnet æˆåŠŸ

---

## Rust å¼€å‘è§„èŒƒ

> æœ¬èŠ‚è§„èŒƒåŸºäº [Xuanwo's AGENTS.md](https://gist.github.com/Xuanwo/fa5162ed3548ae4f962dcc8b8e256bed)ï¼Œé€‚ç”¨äºé¡¹ç›®ä¸­çš„ Rust ä»£ç å¼€å‘ã€‚

### Rust ä»£ç é£æ ¼

#### å‘½åçº¦å®š

```rust
// ç±»å‹å: PascalCase
struct MyStruct {}
enum ClientState {}

// å‡½æ•°å’Œå˜é‡: snake_case
fn process_order() {}
let order_count: u32 = 0;

// å¸¸é‡: SCREAMING_SNAKE_CASE
const MAX_RETRIES: u32 = 3;
const DEFAULT_TIMEOUT: u64 = 30000;

// æ¨¡å—å: snake_case
mod order_builder;
mod http_client;
```

#### æ–‡æ¡£æ³¨é‡Š

æ‰€æœ‰å…¬å…± API å¿…é¡»æœ‰æ–‡æ¡£æ³¨é‡Šï¼š

```rust
/// Creates a new resource.
///
/// # Arguments
///
/// * `config` - Configuration options
///
/// # Returns
///
/// A new `Resource` instance
///
/// # Errors
///
/// Returns `Error::InvalidConfig` if the configuration is invalid.
///
/// # Examples
///
/// ```rust
/// let resource = Resource::new(config)?;
/// ```
pub fn new(config: Config) -> Result<Resource, Error> {
    // ...
}
```

#### é”™è¯¯å¤„ç†

```rust
// âŒ é”™è¯¯ - ä½¿ç”¨ unwrap/expect åœ¨éæµ‹è¯•ä»£ç ä¸­
let result = do_something().unwrap();
let result = do_something().expect("should work");

// âœ… æ­£ç¡® - ä¼ æ’­é”™è¯¯
let result = do_something()?;

// âœ… æ­£ç¡® - æœ‰æ„ä¹‰çš„é”™è¯¯å¤„ç†
let result = do_something().map_err(|e| {
    error!("Failed: {}", e);
    Error::from(e)
})?;

// âœ… æ­£ç¡® - ä½¿ç”¨ anyhow/thiserror è¿›è¡Œé”™è¯¯å¤„ç†
use thiserror::Error;

#[derive(Error, Debug)]
pub enum MyError {
    #[error("Invalid input: {0}")]
    InvalidInput(String),
    #[error("IO error: {0}")]
    Io(#[from] std::io::Error),
}
```

#### æµ‹è¯•è§„èŒƒ

å¯¹éå¹³å‡¡é€»è¾‘çš„æ”¹åŠ¨ï¼Œä¼˜å…ˆè€ƒè™‘æ·»åŠ æˆ–æ›´æ–°æµ‹è¯•ï¼š

```rust
#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_basic_functionality() {
        // Arrange
        let input = create_test_input();
        
        // Act
        let result = process(input);
        
        // Assert
        assert_eq!(result, expected_output());
    }

    #[test]
    fn test_error_case() {
        let invalid_input = create_invalid_input();
        let result = process(invalid_input);
        assert!(matches!(result, Err(MyError::InvalidInput(_))));
    }
}
```

### Cargo å’Œä¾èµ–ç®¡ç†

#### Cargo.toml è§„èŒƒ

```toml
[package]
name = "my-crate"
version = "0.1.0"
edition = "2021"
rust-version = "1.75"  # æ˜ç¡®æŒ‡å®šæœ€ä½ Rust ç‰ˆæœ¬

[dependencies]
# ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬
serde = { version = "1.0", features = ["derive"] }
tokio = { version = "1.0", features = ["rt-multi-thread", "macros"] }

# é¿å…ä½¿ç”¨ * ç‰ˆæœ¬
# âŒ serde = "*"

[dev-dependencies]
# æµ‹è¯•ä¾èµ–åˆ†å¼€å£°æ˜
proptest = "1.0"
criterion = "0.5"

[features]
# ä½¿ç”¨ feature flags æ§åˆ¶å¯é€‰åŠŸèƒ½
default = []
full = ["feature-a", "feature-b"]
```

#### ä¾èµ–é˜…è¯»

å»ºè®®é˜…è¯» Rust ä¾èµ–å®ç°æ—¶ï¼š
- ä¼˜å…ˆç»™å‡ºåŸºäºæœ¬åœ° `~/.cargo/registry` çš„å‘½ä»¤æˆ–è·¯å¾„
- ä½¿ç”¨ `rg`/`grep` æœç´¢æœ¬åœ°æºç 
- å†è€ƒè™‘è¿œç¨‹æ–‡æ¡£æˆ–æºç 

### Rust æäº¤å‰æ£€æŸ¥æ¸…å•

#### ä»£ç è´¨é‡
- [ ] `cargo fmt` æ ¼å¼åŒ–é€šè¿‡
- [ ] `cargo clippy` æ— è­¦å‘Šï¼ˆæˆ–å·²åˆç†å¤„ç†ï¼‰
- [ ] `cargo test` æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] `cargo doc` æ–‡æ¡£ç”Ÿæˆæ— è­¦å‘Š
- [ ] å…¬å…± API æœ‰å®Œæ•´æ–‡æ¡£æ³¨é‡Š

#### å®‰å…¨æ€§
- [ ] æ—  `unwrap()`/`expect()` åœ¨éæµ‹è¯•ä»£ç ä¸­ï¼ˆé™¤éæœ‰å……åˆ†ç†ç”±ï¼‰
- [ ] æ—  `unsafe` ä»£ç ï¼ˆé™¤éæœ‰å……åˆ†ç†ç”±å¹¶æœ‰è¯¦ç»†æ³¨é‡Šï¼‰
- [ ] ä¾èµ–å·²é€šè¿‡ `cargo audit` æ£€æŸ¥

#### æ€§èƒ½
- [ ] é¿å…ä¸å¿…è¦çš„ `clone()`
- [ ] å¤§æ•°æ®ç»“æ„ä½¿ç”¨å¼•ç”¨ä¼ é€’
- [ ] å¼‚æ­¥ä»£ç æ­£ç¡®ä½¿ç”¨ `async`/`await`

---

## ç›¸å…³æ–‡æ¡£

- `ROADMAP.md` - é¡¹ç›®è·¯çº¿å›¾ï¼ˆSource of Truthï¼‰
- `README.md` - ç”¨æˆ·å…¥å£æ–‡æ¡£ï¼ˆå¿…é¡»ä¿æŒæœ€æ–°ï¼‰
- `stories/` - å·¥ä½œå•å…ƒï¼ˆStoriesï¼‰
- `docs/` - è¯¦ç»†è®¾è®¡æ–‡æ¡£
- `CHANGELOG.md` - å˜æ›´æ—¥å¿—
